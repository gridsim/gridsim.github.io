

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. The Simulator General Use &mdash; Gridsim 0.1.1-rc1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/icon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="Gridsim 0.1.1-rc1 documentation" href="index.html"/>
        <link rel="next" title="3. The Simulation Core" href="core.html"/>
        <link rel="prev" title="1. Overview" href="overview.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Gridsim</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">2. The Simulator General Use</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="core.html">3. The Simulation Core</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">4. The Simulation Tools</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="unit.html">5. The Simulation Unit</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="io.html">6. The Gridsim Input/Output</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">7. Further Information</a><ul class="simple">
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Gridsim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>2. The Simulator General Use</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/documentation.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="the-simulator-general-use">
<span id="gridsim-use"></span><h1>2. The Simulator General Use<a class="headerlink" href="#the-simulator-general-use" title="Permalink to this headline">¶</a></h1>
<p>The following section describes the first steps to use the Gridsim simulator
and its built-in modules.</p>
<p>Currently, the simulator provides:</p>
<ul class="simple">
<li><a class="reference internal" href="#gridsim-simu"><em>Global simulation</em></a></li>
<li><a class="reference internal" href="#gridsim-electrical-simu"><em>Electrical simulation</em></a></li>
<li><a class="reference internal" href="#gridsim-thermal-simu"><em>Thermal simulation</em></a></li>
<li><a class="reference internal" href="#gridsim-control"><em>Control of simulation elements</em></a></li>
<li><a class="reference internal" href="#gridsim-record"><em>Record of simulation elements</em></a></li>
</ul>
<div class="section" id="simulation">
<h2>2.1. Simulation<a class="headerlink" href="#simulation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-gridsim.simulation">
<span id="global-simulation"></span><span id="gridsim-simu"></span><h3>2.1.1. Global simulation<a class="headerlink" href="#module-gridsim.simulation" title="Permalink to this headline">¶</a></h3>
<p><em>Module author: Gillian Basso &lt;<a class="reference external" href="mailto:gillian&#46;basso&#37;&#52;&#48;hevs&#46;ch">gillian<span>&#46;</span>basso<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Michael Clausen &lt;<a class="reference external" href="mailto:clm&#37;&#52;&#48;hevs&#46;ch">clm<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p>The <a class="reference internal" href="#module-gridsim.simulation" title="gridsim.simulation"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.simulation</span></tt></a> module defines a simple way to access to the
simulator and offers interfaces of communication with users.</p>
<p>To create a new gridsim simulation you have to initialize a <a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a>
object. Then you will use the different simulation modules in order to define
the electrical and/or thermal topology and parametrize the data recorders and
controllers to form the complete simulation.</p>
<p>Once done, you should always start with a reset to ensure that all simulation
elements are in a defined state. Then you can either do a simple step using the
method <a class="reference internal" href="#gridsim.simulation.Simulator.step" title="gridsim.simulation.Simulator.step"><tt class="xref py py-func docutils literal"><span class="pre">Simulator.step()</span></tt></a> or run a simulation until a given time with a
given step size using the method <a class="reference internal" href="#gridsim.simulation.Simulator.run" title="gridsim.simulation.Simulator.run"><tt class="xref py py-func docutils literal"><span class="pre">Simulator.run()</span></tt></a>.</p>
<p><em>Example</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>

<span class="c"># Create the main simulator object.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="c"># Build topology using the different simulation modules</span>
<span class="o">...</span>

<span class="c"># Run the simulation from the</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hours</span><span class="p">,</span> <span class="mi">100</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">milliseconds</span><span class="p">)</span>
</pre></div>
</div>
<p>As Gridsim is based on modules. You can get access to the
simulation modules by using special attributes of the core simulation object:</p>
<div class="highlight-python"><div class="highlight"><pre>sim = Simulation()
sim.&lt;module_name&gt;
</pre></div>
</div>
<p>So if you import for example <a class="reference internal" href="#module-gridsim.electrical" title="gridsim.electrical"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.electrical</span></tt></a>, you can get the
simulation module by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">el</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Actually, the name of the module is the returned value of
<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.attribute_name" title="gridsim.core.AbstractSimulationModule.attribute_name"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.attribute_name()</span></tt></a>.
Refer to the module you want to use to retrieve the module name.</p>
</div>
<dl class="class">
<dt id="gridsim.simulation.Recorder">
<em class="property">class </em><tt class="descclassname">gridsim.simulation.</tt><tt class="descname">Recorder</tt><big>(</big><em>self</em>, <em>attribute_name</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Recorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Defines the interface an object has to implement in order to get
notified between simulation steps with a reference to the observed
object, the name of the attribute/property, the actual time and the
actual value of the observed attribute/property.</p>
<p>To add a recorder to the simulation, use <a class="reference internal" href="#gridsim.simulation.Simulator.record" title="gridsim.simulation.Simulator.record"><tt class="xref py py-func docutils literal"><span class="pre">Simulator.record()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attribute_name</strong> (<em>str</em>) &#8211; The name of the attribute observed by this
recorder.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.simulation.Recorder.attribute_name">
<tt class="descname">attribute_name</tt><a class="headerlink" href="#gridsim.simulation.Recorder.attribute_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the attribute observed by this recorder.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Recorder.on_simulation_reset">
<tt class="descname">on_simulation_reset</tt><big>(</big><em>self</em>, <em>subjects</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Recorder.on_simulation_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called by the simulation on order to inform the recorder
that the simulation has been reset. The parameter <tt class="docutils literal"><span class="pre">subjects</span></tt> is a list
of all subjects that are observer by the actual recorder. The method is
called for each binding the recorder has with the simulation. This means
that you do 3 calls to <a class="reference internal" href="#gridsim.simulation.Simulator.record" title="gridsim.simulation.Simulator.record"><tt class="xref py py-func docutils literal"><span class="pre">Simulator.record()</span></tt></a>
with the same recorder, this method is called 3 times.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>subjects</strong> (list or tuple of
<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement</span></tt></a>) &#8211; list of all observed objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Recorder.on_simulation_step">
<tt class="descname">on_simulation_step</tt><big>(</big><em>self</em>, <em>time</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Recorder.on_simulation_step" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is called each time the simulation just completed a step.
This method is optional and not required to re-implement a recorder.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual simulation time.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Recorder.on_observed_value">
<tt class="descname">on_observed_value</tt><big>(</big><em>self</em>, <em>subject</em>, <em>time</em>, <em>value</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Recorder.on_observed_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by the main simulation engine between each simulation step in
order the recorder can save the time-value pair of one or multiple
<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a> subclass(es).
Any recorder is required to implement this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>subject</strong> (<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a>) &#8211; The object that will be observed by the recorder.</li>
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulation.</li>
<li><strong>value</strong> (<em>Depends attribute...</em>) &#8211; The actual value of the attribute/property of the subject.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.simulation.Simulator">
<em class="property">class </em><tt class="descclassname">gridsim.simulation.</tt><tt class="descname">Simulator</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Gridsim main simulation class. Moves the simulation of all modules
on in time and groups all simulation modules. The constructor creates
automatically an instance of each registered simulation module. The fact
to import a simulation module to the user&#8217;s project registers the module
automatically within the main simulation class. So only modules really
used by the simulation are instantiated.</p>
<dl class="staticmethod">
<dt id="gridsim.simulation.Simulator.register_simulation_module">
<em class="property">static </em><tt class="descname">register_simulation_module</tt><big>(</big><em>module_class</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.register_simulation_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a simulation module class within the main simulator class.
Note that you register the class, the simulator automatically
instantiates an object of the class in its own constructor every time an
instance of the simulator is created.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>module_class</strong> (<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule" title="gridsim.core.AbstractSimulationModule"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule</span></tt></a>) &#8211; The class to register as a simulation module.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Simulator.find">
<tt class="descname">find</tt><big>(</big><em>self</em>, <em>module=None</em>, <em>uid=None</em>, <em>friendly_name=None</em>, <em>element_class=None</em>, <em>instance_of=None</em>, <em>has_attribute=None</em>, <em>close_to=None</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds all <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a> derived
objects matching the given criteria by searching on either the given
Gridsim simulation module or by searching the whole simulation of the
module was not specified. Note that the method returns always a list of
elements, even if only a single instance is found. All parameters are
optional, if <a class="reference internal" href="#gridsim.simulation.Simulator.find" title="gridsim.simulation.Simulator.find"><tt class="xref py py-func docutils literal"><span class="pre">find()</span></tt></a> will be called without any parameters,
the list of all elements in the actual simulation will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>module</strong> (<em>str</em>) &#8211; The module to search for elements.</li>
<li><strong>uid</strong> (<em>int</em>) &#8211; ID of the element. Note that these ID&#8217;s are only unique for
a given class inside a module, so you should never search just for
an ID without specifying either the class or at least the module.</li>
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; The friendly name to search for.</li>
<li><strong>element_class</strong> (<em>type</em>) &#8211; The exact class the element has to be an instance 
of. Superclasses are not considered.</li>
<li><strong>instance_of</strong> (<em>type</em>) &#8211; The object has to be an instance of the given class,
whereas this can be the superclass of the object too.</li>
<li><strong>has_attribute</strong> (<em>str</em>) &#8211; The object should have an attribute with the given
name. This can be used in order to find all objects that have a 
<tt class="docutils literal"><span class="pre">power</span></tt> attribute.</li>
<li><strong>close_to</strong> (<em>(Position, float)</em>) &#8211; The object&#8217;s position should be closer to the given one
than the given radius. The parameters should be passed as tuple of 
the position and the radius in meters [m]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">List of <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a>
matching the given criteria.</p>
</td>
</tr>
</tbody>
</table>
<p><em>Example:</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.util</span> <span class="kn">import</span> <span class="n">Position</span>
<span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.core</span> <span class="kn">import</span> <span class="n">AbstractElectricalCPSElement</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.network</span> <span class="kn">import</span> <span class="n">ElectricalSlackBus</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.element</span> <span class="kn">import</span> <span class="n">ThermalProcess</span>

<span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="c"># Here you could create the topology of the actual simulation...</span>
<span class="c"># ...</span>

<span class="c"># Get all elements of the electrical simulation module</span>
<span class="c">#   (Both statements do exactly the same).</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s">&#39;electrical&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>

<span class="c"># Get the electrical slack bus.</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element_class</span><span class="o">=</span><span class="n">ElectricalSlackBus</span><span class="p">)</span>

<span class="c"># Get all electrical consumer/producer/storage elements.</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">instance_of</span><span class="o">=</span><span class="n">AbstractElectricalCPSElement</span><span class="p">)</span>

<span class="c"># Get the element with friendly name &#39;bus23&#39;.</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">friendly_name</span><span class="o">=</span><span class="s">&#39;bus23&#39;</span><span class="p">)</span>

<span class="c"># Get all elements which have the &#39;temperature&#39; attribute.</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>

<span class="c"># Get all elements of the simulation that are close (1km)</span>
<span class="c">#   to a given point (Route du rawyl 47, Sion).</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">close_to</span><span class="o">=</span><span class="p">(</span><span class="n">Position</span><span class="p">(</span><span class="mf">46.240301</span><span class="p">,</span> <span class="mf">7.358394</span><span class="p">,</span> <span class="mi">566</span><span class="p">),</span> <span class="mi">1000</span><span class="p">))</span>

<span class="c"># Of course these search criteria can be mixed.</span>
<span class="c">#   For example we search the 5th thermal process.</span>
<span class="k">print</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">module</span><span class="o">=</span><span class="s">&#39;thermal&#39;</span><span class="p">,</span> <span class="n">element_class</span><span class="o">=</span><span class="n">ThermalProcess</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Simulator.reset">
<tt class="descname">reset</tt><big>(</big><em>self</em>, <em>initial_time=0*units.second</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets (re-initializes) the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>initial_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The initial time from which the simulation starts.
Defaults to <tt class="docutils literal"><span class="pre">0</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Simulator.step">
<tt class="descname">step</tt><big>(</big><em>self</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a single simulation step on all modules.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for the single step.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Simulator.run">
<tt class="descname">run</tt><big>(</big><em>self</em>, <em>run_time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the simulation for a given time.</p>
<p>The run_time parameter defines the duration the simulation has to run.
If a simulation was already run before, the additional duration is
run in addition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>run_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Total run time.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Time interval for the simulation.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.simulation.Simulator.record">
<tt class="descname">record</tt><big>(</big><em>self</em>, <em>recorder</em>, <em>subjects</em>, <em>conversion=None</em><big>)</big><a class="headerlink" href="#gridsim.simulation.Simulator.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a recorder to an attribute of an object. The recorder has to
implement the <a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> interface in order to
receive the data of the given attribute after each simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>recorder</strong> (<a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a>) &#8211; Reference to the recorder object. This object gets
notified about the changes of the object&#8217;s attribute at each
simulation step.</li>
<li><strong>subjects</strong> (list or tuple of <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a>) &#8211; The subjects of the recorder, in other words the 
objects which is attributes has to be recorded.</li>
<li><strong>conversion</strong> (<em>lambda context</em>) &#8211; <p>Lambda function to convert the actual value taken
from the attribute before recording. The lambda function gets a
single parameter <tt class="docutils literal"><span class="pre">context</span></tt> which is a named tuple with the following
elements:</p>
<p><strong>value</strong>: The actual value just read from the simulation element&#8217;s
attribute.</p>
<p><strong>time</strong>: The actual simulation time.</p>
<p><strong>delta_time</strong>: The time step just simulated before updating the
recorder. This can be handy in order to calculate for example the
power of a delta-energy value.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Reference to the recoder.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridsim.electrical">
<span id="electrical-simulation"></span><span id="gridsim-electrical-simu"></span><h3>2.1.2. Electrical simulation<a class="headerlink" href="#module-gridsim.electrical" title="Permalink to this headline">¶</a></h3>
<p><em>Module author: Gilbert Maitre &lt;<a class="reference external" href="mailto:gilbert&#46;maitre&#37;&#52;&#48;hevs&#46;ch">gilbert<span>&#46;</span>maitre<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p>The <a class="reference internal" href="#module-gridsim.electrical" title="gridsim.electrical"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.electrical</span></tt></a> module implements the electrical part of the
gridsim simulator. It basically manages Consuming-Producing-Storing (CPS)
Elements, which consume (positive sign) and/or produce (negative sign) a
certain amount of energy (<tt class="docutils literal"><span class="pre">delta_energy</span></tt>) at each simulation step.</p>
<p>CPS elements may be attach to buses of an electrical power network, which is
also made of branches as connections between buses.</p>
<p><em>Example</em>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.network</span> <span class="kn">import</span> <span class="n">ElectricalPVBus</span><span class="p">,</span> <span class="n">ElectricalPQBus</span><span class="p">,</span>\
    <span class="n">ElectricalTransmissionLine</span><span class="p">,</span> <span class="n">ElectricalGenTransformer</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.element</span> <span class="kn">import</span> <span class="n">GaussianRandomElectricalCPSElement</span><span class="p">,</span> \
    <span class="n">ConstantElectricalCPSElement</span>
<span class="kn">from</span> <span class="nn">gridsim.recorder</span> <span class="kn">import</span> <span class="n">PlotRecorder</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.loadflow</span> <span class="kn">import</span> <span class="n">DirectLoadFlowCalculator</span>

<span class="kn">from</span> <span class="nn">gridsim.iodata.output</span> <span class="kn">import</span> <span class="n">FigureSaver</span>

<span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">esim</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span>
<span class="n">esim</span><span class="o">.</span><span class="n">load_flow_calculator</span> <span class="o">=</span> <span class="n">DirectLoadFlowCalculator</span><span class="p">()</span>

<span class="c"># add buses to simulator</span>
<span class="c"># slack bus has been automatically added</span>
<span class="n">esim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectricalPQBus</span><span class="p">(</span><span class="s">&#39;Bus 1&#39;</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectricalPQBus</span><span class="p">(</span><span class="s">&#39;Bus 2&#39;</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectricalPQBus</span><span class="p">(</span><span class="s">&#39;Bus 3&#39;</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectricalPVBus</span><span class="p">(</span><span class="s">&#39;Bus 4&#39;</span><span class="p">))</span>

<span class="c"># add branches to simulator</span>
<span class="c"># this operation directly connects them to buses, buses have to be already added</span>
<span class="c"># variant 1</span>
<span class="n">esim</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;Branch 5-3&#39;</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Slack Bus&#39;</span><span class="p">),</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 3&#39;</span><span class="p">),</span>
             <span class="n">ElectricalGenTransformer</span><span class="p">(</span><span class="s">&#39;Tap 1&#39;</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.05</span><span class="p">),</span> <span class="mf">0.03</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">))</span>
<span class="n">tl1</span> <span class="o">=</span> <span class="n">esim</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;Branch 3-1&#39;</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 3&#39;</span><span class="p">),</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 1&#39;</span><span class="p">),</span>
                   <span class="n">ElectricalTransmissionLine</span><span class="p">(</span><span class="s">&#39;Line 1&#39;</span><span class="p">,</span>
                                              <span class="mf">1.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                              <span class="mf">0.35</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">,</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">))</span>
<span class="n">tl2</span> <span class="o">=</span> <span class="n">esim</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;Branch 3-2&#39;</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 3&#39;</span><span class="p">),</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 2&#39;</span><span class="p">),</span>
                   <span class="n">ElectricalTransmissionLine</span><span class="p">(</span><span class="s">&#39;Line 2&#39;</span><span class="p">,</span>
                                              <span class="mf">1.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                              <span class="mf">0.3</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">,</span> <span class="mf">0.08</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">,</span>
                                              <span class="mi">2</span><span class="o">*</span><span class="mf">0.25</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">siemens</span><span class="p">))</span>
<span class="n">tl3</span> <span class="o">=</span> <span class="n">esim</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;Branch 1-2&#39;</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 1&#39;</span><span class="p">),</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 2&#39;</span><span class="p">),</span>
                   <span class="n">ElectricalTransmissionLine</span><span class="p">(</span><span class="s">&#39;Line 3&#39;</span><span class="p">,</span>
                                              <span class="mf">1.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                              <span class="mf">0.25</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">,</span> <span class="mf">0.04</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">,</span>
                                              <span class="mi">2</span><span class="o">*</span><span class="mf">0.25</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">siemens</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;Branch 4-2&#39;</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 4&#39;</span><span class="p">),</span> <span class="n">esim</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="s">&#39;Bus 2&#39;</span><span class="p">),</span>
             <span class="n">ElectricalGenTransformer</span><span class="p">(</span><span class="s">&#39;Tap 2&#39;</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mf">1.05</span><span class="p">),</span> <span class="mf">0.015</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">))</span>

<span class="c"># attach electrical elements to buses, electrical elements are automatically</span>
<span class="c"># added to simulator</span>
<span class="n">esim</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="s">&#39;Bus 1&#39;</span><span class="p">,</span> <span class="n">GaussianRandomElectricalCPSElement</span><span class="p">(</span><span class="s">&#39;Load1&#39;</span><span class="p">,</span>
                        <span class="mf">1.6</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">,</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="s">&#39;Bus 2&#39;</span><span class="p">,</span> <span class="n">GaussianRandomElectricalCPSElement</span><span class="p">(</span><span class="s">&#39;Load2&#39;</span><span class="p">,</span>
                        <span class="mf">2.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">,</span> <span class="mf">0.2</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="s">&#39;Bus 3&#39;</span><span class="p">,</span> <span class="n">GaussianRandomElectricalCPSElement</span><span class="p">(</span><span class="s">&#39;Load3&#39;</span><span class="p">,</span>
                        <span class="mf">3.7</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">,</span> <span class="mf">0.3</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">))</span>
<span class="n">esim</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="s">&#39;Bus 4&#39;</span><span class="p">,</span> <span class="n">ConstantElectricalCPSElement</span><span class="p">(</span><span class="s">&#39;Gen&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">watt</span><span class="p">))</span>

<span class="c"># Create a plot recorder which records power on each bus.</span>
<span class="n">bus_pwr</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;P&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">bus_pwr</span><span class="p">,</span> <span class="n">esim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element_class</span><span class="o">=</span><span class="n">ElectricalPQBus</span><span class="p">))</span>

<span class="c"># Create a plot recorder which records power on transmission lines.</span>
<span class="n">line_pwr</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;Pij&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">line_pwr</span><span class="p">,</span> <span class="p">[</span><span class="n">tl1</span><span class="p">,</span> <span class="n">tl2</span><span class="p">,</span> <span class="n">tl3</span><span class="p">])</span>

<span class="c"># It is recommended to perform the simulator reset operation.</span>
<span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Running simulation...&quot;</span><span class="p">)</span>

<span class="c"># Run the simulation for two hours with a resolution of 1 minute.</span>
<span class="n">total_time</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hours</span>
<span class="n">delta_time</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">minutes</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">total_time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Saving data...&quot;</span><span class="p">)</span>

<span class="c"># Save the figures as images.</span>
<span class="n">saver</span> <span class="o">=</span> <span class="n">FigureSaver</span><span class="p">(</span><span class="n">bus_pwr</span><span class="p">,</span> <span class="s">&quot;PQ Bus power&quot;</span><span class="p">)</span>
<span class="n">saver</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/bus_pwr.pdf&#39;</span><span class="p">)</span>
<span class="n">saver</span> <span class="o">=</span> <span class="n">FigureSaver</span><span class="p">(</span><span class="n">line_pwr</span><span class="p">,</span> <span class="s">&quot;Line power&quot;</span><span class="p">)</span>
<span class="n">saver</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/line_pwr.pdf&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>shows a pure electrical example made of a reference 5-bus network
(see e.g. Xi-Fan Wang, Yonghua Song, Malcolm Irving, Modern power systems
analysis), to the non-slack buses of which are attached 4 CPS elements :
1 with constant power, production, 3 with random gaussian distributed power
consumption.</p>
<div class="section" id="module-gridsim.electrical.simulation">
<span id="electrical-package"></span><h4>2.1.2.1. Electrical package<a class="headerlink" href="#module-gridsim.electrical.simulation" title="Permalink to this headline">¶</a></h4>
<p><em>Module author: Gillian Basso &lt;<a class="reference external" href="mailto:gillian&#46;basso&#37;&#52;&#48;hevs&#46;ch">gillian<span>&#46;</span>basso<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Gilbert Maitre &lt;<a class="reference external" href="mailto:gilbert&#46;maitre&#37;&#52;&#48;hevs&#46;ch">gilbert<span>&#46;</span>maitre<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<dl class="class">
<dt id="gridsim.electrical.simulation.ElectricalSimulator">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.simulation.</tt><tt class="descname">ElectricalSimulator</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule" title="gridsim.core.AbstractSimulationModule"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule</span></tt></a></p>
<p>Gridsim main simulation class for electrical part. This module is
automatically added to the <a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a> when
importing any class or module of <a class="reference internal" href="#module-gridsim.electrical" title="gridsim.electrical"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.electrical</span></tt></a> package.</p>
<p>To access this class from simulation, use
<a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a> as follow:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">esim</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>calculator</strong> (<a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator</span></tt></a>) &#8211; The load flow calculator used by the simulator</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.load_flow_calculator">
<tt class="descname">load_flow_calculator</tt><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.load_flow_calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>The load flow calculator</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#module-gridsim.electrical.loadflow" title="gridsim.electrical.loadflow"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.electrical.loadflow</span></tt></a> for more details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.add">
<tt class="descname">add</tt><big>(</big><em>self</em>, <em>element</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the element to the electrical simulation but do not connect it with
other elements. use other functions such as <a class="reference internal" href="#gridsim.electrical.simulation.ElectricalSimulator.connect" title="gridsim.electrical.simulation.ElectricalSimulator.connect"><tt class="xref py py-func docutils literal"><span class="pre">connect()</span></tt></a> and
<a class="reference internal" href="#gridsim.electrical.simulation.ElectricalSimulator.attach" title="gridsim.electrical.simulation.ElectricalSimulator.attach"><tt class="xref py py-func docutils literal"><span class="pre">attach()</span></tt></a> to really use the element in the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>element</strong> (<a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalElement" title="gridsim.electrical.core.AbstractElectricalElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalElement</span></tt></a>) &#8211; the element to add</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the given element</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.bus">
<tt class="descname">bus</tt><big>(</big><em>self</em>, <em>id_or_friendly_name</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.bus" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the bus with the given id or friendly name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>id_or_friendly_name</strong> (<em>(int, str)</em>) &#8211; the identifier of the bus</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>KeyError</strong> &#8211; if the friendly name is not valid</li>
<li><strong>IndexError</strong> &#8211; if the id is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.branch">
<tt class="descname">branch</tt><big>(</big><em>self</em>, <em>id_or_friendly_name</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.branch" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the branch with the given id or friendly name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>id_or_friendly_name</strong> (<em>(int, str)</em>) &#8211; the identifier of the bus</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalNetworkBranch" title="gridsim.electrical.core.ElectricalNetworkBranch"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalNetworkBranch</span></tt></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>KeyError</strong> &#8211; if the friendly name is not valid</li>
<li><strong>IndexError</strong> &#8211; if the id is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.cps_element">
<tt class="descname">cps_element</tt><big>(</big><em>self</em>, <em>id_or_friendly_name</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.cps_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the branch with the given id or friendly name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>id_or_friendly_name</strong> (<em>(int, str)</em>) &#8211; the identifier of the bus</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalCPSElement</span></tt></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><strong>KeyError</strong> &#8211; if the friendly name is not valid</li>
<li><strong>IndexError</strong> &#8211; if the id is not valid</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.connect">
<tt class="descname">connect</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>bus_a</em>, <em>bus_b</em>, <em>two_port</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalNetworkBranch" title="gridsim.electrical.core.ElectricalNetworkBranch"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalNetworkBranch</span></tt></a> with
the given parameters and adds it to the simulation.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalNetworkBranch" title="gridsim.electrical.core.ElectricalNetworkBranch"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalNetworkBranch</span></tt></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; the name of the branch</li>
<li><strong>bus_a</strong> (<a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a>) &#8211; the first bus the branch connects</li>
<li><strong>bus_b</strong> (<a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a>) &#8211; the second bus the branch connects</li>
<li><strong>two_port</strong> &#8211; the element placed on the branch</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the new <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalNetworkBranch" title="gridsim.electrical.core.ElectricalNetworkBranch"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalNetworkBranch</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.attach">
<tt class="descname">attach</tt><big>(</big><em>self</em>, <em>bus</em>, <em>el</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.attach" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches the given bus to the given element. After this function, the
element is present in the simulation and will provide electrical energy
to the simulation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>bus</strong> (<a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a>) &#8211; the bus the element has to be attached</li>
<li><strong>el</strong> (<a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalCPSElement</span></tt></a>) &#8211; the new element of the simulation</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.attribute_name">
<tt class="descname">attribute_name</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.attribute_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of this module.
This name is used to access to this electrical simulator from the
<a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">esim</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">&#8216;electrical&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.all_elements">
<tt class="descname">all_elements</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.all_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalElement" title="gridsim.electrical.core.AbstractElectricalElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalElement</span></tt></a>
contained in the module.
The core simulator will use these lists in order to be able
to retrieve objects or list of objects by certain criteria using
<a class="reference internal" href="#gridsim.simulation.Simulator.find" title="gridsim.simulation.Simulator.find"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Simulator.find()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.reset">
<tt class="descname">reset</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement.reset" title="gridsim.core.AbstractSimulationElement.reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement.reset()</span></tt></a> of
each element in this electrical simulator, added by the
<a class="reference internal" href="#gridsim.electrical.simulation.ElectricalSimulator.add" title="gridsim.electrical.simulation.ElectricalSimulator.add"><tt class="xref py py-func docutils literal"><span class="pre">ElectricalSimulator.add()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement.calculate" title="gridsim.core.AbstractSimulationElement.calculate"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement.calculate()</span></tt></a>
of each <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalCPSElement</span></tt></a> in this electrical
simulator, added by the <tt class="xref py py-func docutils literal"><span class="pre">ElectricalSimulator.add()</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual simulation time.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The time period for which the calculation
has to be done.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.simulation.ElectricalSimulator.update">
<tt class="descname">update</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.simulation.ElectricalSimulator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the data of each <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalCPSElement</span></tt></a> in this
electrical simulator added by the <tt class="xref py py-func docutils literal"><span class="pre">ElectricalSimulator.add()</span></tt> and
calculate the load flow with
<a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual simulation time.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The time period for which the calculation
has to be done.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridsim.electrical.loadflow">
<span id="electrical-load-flow"></span><h4>2.1.2.2. Electrical load flow<a class="headerlink" href="#module-gridsim.electrical.loadflow" title="Permalink to this headline">¶</a></h4>
<p><em>Module author: Michael Sequeira Carvalho &lt;<a class="reference external" href="mailto:michael&#46;sequeira&#37;&#52;&#48;hevs&#46;ch">michael<span>&#46;</span>sequeira<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Module author: Gilbert Maitre &lt;<a class="reference external" href="mailto:gilbert&#46;maitre&#37;&#52;&#48;hevs&#46;ch">gilbert<span>&#46;</span>maitre<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p>This module provides a toolbox to Gridsim to perform computation of electrical
values within the electrical network, in other words to solve the so-called
power-flow problem:</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation">http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation</a></p>
</div>
<dl class="class">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.loadflow.</tt><tt class="descname">AbstractElectricalLoadFlowCalculator</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>This class is the base for all calculator that have been or are going to
be implemented to solve the power-flow problem.</p>
<p>At initialization the user has to give the reference power value
<cite>s_base</cite> (all power values are then given relative to this reference
value), the reference voltage value <cite>v_base</cite> (all voltage values are
then given relative to this reference value), a boolean array <cite>is_PV</cite>
specifying which one among the buses is a <a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>
(the bus with 1st position is slack, the others non
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a> are <a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a>), an integer
array <cite>b</cite> specifying for each branch the bus id it is starting from and
the bus id it is going to, a complex array <cite>Yb</cite> specifying
admittances of each network branch.</p>
<dl class="attribute">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.s_base">
<tt class="descname">s_base</tt><em class="property"> = None</em><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.s_base" title="Permalink to this definition">¶</a></dt>
<dd><p>The reference power value.
Set by <a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update"><tt class="xref py py-func docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator.update()</span></tt></a></p>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.v_base">
<tt class="descname">v_base</tt><em class="property"> = None</em><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.v_base" title="Permalink to this definition">¶</a></dt>
<dd><p>The reference voltage value.
Set by <a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update"><tt class="xref py py-func docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator.update()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update">
<tt class="descname">update</tt><big>(</big><em>self</em>, <em>s_base</em>, <em>v_base</em>, <em>is_PV</em>, <em>b</em>, <em>Yb</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates values of the calculator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>s_base</strong> (<em>float</em>) &#8211; reference power value</li>
<li><strong>v_base</strong> (<em>float</em>) &#8211; reference voltage value</li>
<li><strong>is_PV</strong> (<em>1-dimensional numpy array of boolean</em>) &#8211; N-long vector specifying which bus is of type
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>, where N is the number of buses including
slack.</li>
<li><strong>b</strong> (<em>2-dimensional numpy array of int</em>) &#8211; Mx2 table containing for each branch the ids of start and end
buses.</li>
<li><strong>Yb</strong> (<em>2-dimensional numpy array of complex</em>) &#8211; Mx4 table containing the admittances <cite>Yii</cite>, <cite>Yij</cite>, <cite>Yjj</cite>,
and <cite>Yji</cite> of each branch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>P</em>, <em>Q</em>, <em>V</em>, <em>Th</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute all bus electrical values determined by the network:</p>
<ul class="simple">
<li>takes as input active powers P of all non-slack buses, reactive powers
of <a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a> and voltage amplitudes of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>; all these values have to be placed by the
user at the right place in the N-long vectors, <cite>P</cite>, <cite>Q</cite>, and,
respectively, <cite>V</cite>, passed to this method.</li>
<li>outputs active power of slack bus, reactive powers of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>, voltage amplitudes of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a>, and voltage angles of all buses; all these
values are placed by this method at the
right place in the N-long vectors <cite>P</cite>, <cite>Q</cite>, <cite>V</cite>, and, respectively,
<cite>Th</cite>, passed to this method.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>P</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus active powers, where N is the number of
buses including slack.</li>
<li><strong>Q</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus reactive powers, where N is the number of
buses including slack.</li>
<li><strong>V</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage amplitudes, where N is the number
of buses including slack.</li>
<li><strong>Th</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage angles, where N is the number
of buses including slack.</li>
<li><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether electrical input values are scaled or
not</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.get_branch_power_flows">
<tt class="descname">get_branch_power_flows</tt><big>(</big><em>self</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.get_branch_power_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute all branch power flows. Cannot be called before method
<a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate"><tt class="xref py py-func docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator.calculate()</span></tt></a>.
Returns a tuple made of 4 1-dimensional numpy arrays:</p>
<ul class="simple">
<li>Pij containing branch input active powers,</li>
<li>Qij containing branch input reactive powers,</li>
<li>Pji containing branch output active powers,</li>
<li>Qji containing branch output reactive powers.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether output power flows have to be scaled or
not</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">4 M-long vector, where M is the number of branches<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Pij:</th><td class="field-body">vector of active powers entering the branch from the from-bus
termination</td>
</tr>
<tr class="field-even field"><th class="field-name">Qij:</th><td class="field-body">vector of reactive powers entering the branch from the from-bus
termination</td>
</tr>
<tr class="field-odd field"><th class="field-name">Pji:</th><td class="field-body">vector of active powers entering the branch from the to-bus
termination</td>
</tr>
<tr class="field-even field"><th class="field-name">Qji:</th><td class="field-body">vector of reactive powers entering the branch from the to-bus
termination</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tuple of one-dimensional numpy arrays of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.get_branch_max_currents">
<tt class="descname">get_branch_max_currents</tt><big>(</big><em>self</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.get_branch_max_currents" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the maximal current amplitude of each branch. Cannot be called
before method <a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate"><tt class="xref py py-func docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator.calculate()</span></tt></a>.
Returns a M-long vector of maximal branch
current amplitudes, where M is the number of branches.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether output currents have to be scaled or
not</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">M-long vector containing for each branch the maximal current
amplitude</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">1-dimensional numpy array of float</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.loadflow.DirectLoadFlowCalculator">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.loadflow.</tt><tt class="descname">DirectLoadFlowCalculator</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.DirectLoadFlowCalculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator</span></tt></a></p>
<p>This class implements the direct load flow method to solve the
power-flow problem.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation">http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation</a>.</p>
</div>
<p>The method is described for example in Hossein Seifi, Mohammad Sadegh
Sepasian, Electric Power System Planning: Issues, Algorithms and
Solutions, pp. 246-248</p>
<p>At initialization the user has to give the reference power value
<cite>s_base</cite> (all power values are then given relative to this reference
value), the reference voltage value <cite>v_base</cite> (all voltage values are
then given relative to this reference value), a boolean array <cite>is_PV</cite>
specifying which one among the buses is a <a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>
(the bus with 1st position is slack, the others non
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a> buses are <a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a> buses), an
integer array <cite>b</cite> specifying for each branch the bus id it is starting
from and the bus id it is going to, a complex array <cite>Yb</cite> specifying
admittances of each network branch.</p>
<dl class="method">
<dt id="gridsim.electrical.loadflow.DirectLoadFlowCalculator.update">
<tt class="descname">update</tt><big>(</big><em>self</em>, <em>s_base</em>, <em>v_base</em>, <em>is_PV</em>, <em>b</em>, <em>Yb</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.DirectLoadFlowCalculator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates values of the calculator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>s_base</strong> (<em>float</em>) &#8211; reference power value</li>
<li><strong>v_base</strong> (<em>float</em>) &#8211; reference voltage value</li>
<li><strong>is_PV</strong> (<em>1-dimensional numpy array of boolean</em>) &#8211; N-long vector specifying which bus is of type
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>, where N is the number of buses including
slack.</li>
<li><strong>b</strong> (<em>2-dimensional numpy array of int</em>) &#8211; Mx2 table containing for each branch the ids of start and end
buses.</li>
<li><strong>Yb</strong> (<em>2-dimensional numpy array of complex</em>) &#8211; Mx4 table containing the admittances Yii, Yij, Yjj, and Yji
of each branch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">variable names have been chosen to match the notation used in
Hossein Seifi, Mohammad Sadegh Sepasian, Electric Power System
Planning: Issues, Algorithms and Solutions, pp. 246-248</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.DirectLoadFlowCalculator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>P</em>, <em>Q</em>, <em>V</em>, <em>Th</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.DirectLoadFlowCalculator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes all bus electrical values determined by the network, i.e</p>
<ul class="simple">
<li>takes as input active powers P of all non-slack buses.</li>
<li>outputs voltage angles of all buses.</li>
</ul>
<p>Reactive powers and voltage amplitudes are not used. However, to be
compatible with the N-long vectors with the method of the base class,
all N-long vectors P, Q, V, and Th have to be passed to this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>P</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus active powers, where N is the number of
buses including slack.</li>
<li><strong>Q</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus reactive powers, where N is the number of
buses including slack.</li>
<li><strong>V</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage amplitudes, where N is the number
of buses including slack.</li>
<li><strong>Th</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage angles, where N is the number of
buses including slack.</li>
<li><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether electrical input values are scaled or
not</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.DirectLoadFlowCalculator.get_branch_power_flows">
<tt class="descname">get_branch_power_flows</tt><big>(</big><em>self</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.DirectLoadFlowCalculator.get_branch_power_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes all branch power flows. Cannot be called before method
<a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator.calculate"><tt class="xref py py-func docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator.calculate()</span></tt></a>.
To be compatible with the generic method, returns a
tuple made of 4 1-dimensional numpy arrays:</p>
<ul class="simple">
<li><cite>Pij</cite> containing branch input active powers,</li>
<li><cite>Qij</cite> containing branch input reactive powers,</li>
<li><cite>Pji</cite> containing branch output active powers,</li>
<li><cite>Qji</cite> containing branch output reactive powers.</li>
</ul>
<p>Here, <cite>Qij</cite> and <cite>Qji</cite> are <cite>None</cite>. <cite>Pji</cite> is equal to <cite>-Pij</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether output power flows have to be scaled
or not</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">4 M-long vector, where M is the number of branches<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Pij:</th><td class="field-body">vector of active powers entering the branch from the from-bus
termination</td>
</tr>
<tr class="field-even field"><th class="field-name">Qij:</th><td class="field-body">None</td>
</tr>
<tr class="field-odd field"><th class="field-name">Pji:</th><td class="field-body">vector of active powers entering the branch from the to-bus
termination</td>
</tr>
<tr class="field-even field"><th class="field-name">Qji:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">mixed tuple of None and one-dimensional numpy arrays of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.DirectLoadFlowCalculator.get_branch_max_currents">
<tt class="descname">get_branch_max_currents</tt><big>(</big><em>self</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.DirectLoadFlowCalculator.get_branch_max_currents" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns active powers entering the branch from the from-bus termination.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether output power flows have to be scaled
or not</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a M-long vector of active powers entering the branch from the
from-bus termination, where M is the number of branches</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function is currently untested.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.loadflow.</tt><tt class="descname">NewtonRaphsonLoadFlowCalculator</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator</span></tt></a></p>
<p>This class implements the Newton-Raphson method to solve the power-flow
problem.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation">http://en.wikipedia.org/wiki/Power-flow_study#Power-flow_problem_formulation</a>.</p>
</div>
<p>At initialization the user has to give the reference power value
<cite>s_base</cite> (all power values are then given relative to this reference
value), the reference voltage value <cite>v_base</cite> (all voltage values are
then given relative to this reference value), a boolean array <cite>is_PV</cite>
specifying which one among the buses is a <a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>
(the bus with 1st position is slack, the others non
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a> are <a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a>), an integer
array <cite>b</cite> specifying for each branch the bus id it is starting from and
the bus id it is going to, a complex array <cite>Yb</cite> specifying
admittances of each network branch.</p>
<dl class="method">
<dt id="gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator.update">
<tt class="descname">update</tt><big>(</big><em>self</em>, <em>s_base</em>, <em>v_base</em>, <em>is_PV</em>, <em>b</em>, <em>Yb</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates values of the calculator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>s_base</strong> (<em>float</em>) &#8211; reference power value</li>
<li><strong>v_base</strong> (<em>float</em>) &#8211; reference voltage value</li>
<li><strong>is_PV</strong> (<em>1-dimensional numpy array of boolean</em>) &#8211; N-long vector specifying which bus is of type
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>, where N is the number of buses including
slack.</li>
<li><strong>b</strong> (<em>2-dimensional numpy array of int</em>) &#8211; Mx2 table containing for each branch the ids of start and end
buses.</li>
<li><strong>Yb</strong> (<em>2-dimensional numpy array of complex</em>) &#8211; Mx4 table containing the admittances <cite>Yii</cite>, <cite>Yij</cite>, <cite>Yjj</cite>,
and <cite>Yji</cite> of each branch.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>P</em>, <em>Q</em>, <em>V</em>, <em>Th</em>, <em>scaled</em><big>)</big><a class="headerlink" href="#gridsim.electrical.loadflow.NewtonRaphsonLoadFlowCalculator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute all bus electrical values determined by the network, i.e</p>
<ul class="simple">
<li>takes as input active powers <cite>P</cite> of all non-slack buses, reactive
powers of <a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a> and voltage amplitudes of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>; all these values have to be placed by the
user at the right place in the N-long vectors, <cite>P</cite>, <cite>Q</cite>, and,
respectively, <cite>V</cite>, passed to this method</li>
<li>outputs active power of slack bus, reactive powers of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPVBus" title="gridsim.electrical.network.ElectricalPVBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPVBus</span></tt></a>, voltage amplitudes of
<a class="reference internal" href="#gridsim.electrical.network.ElectricalPQBus" title="gridsim.electrical.network.ElectricalPQBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalPQBus</span></tt></a>, and voltage angles of all buses; all these
values are placed by this method at the right place in the N-long
vectors <cite>P</cite>, <cite>Q</cite>, <cite>V</cite>, and, respectively, Th, passed to this method.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>P</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus active powers, where N is the number of
buses including slack.</li>
<li><strong>Q</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus reactive powers, where N is the number of
buses including slack.</li>
<li><strong>V</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage amplitudes, where N is the number
of buses including slack.</li>
<li><strong>Th</strong> (<em>1-dimensional numpy array of float</em>) &#8211; N-long vector of bus voltage angles, where N is the number
of buses including slack.</li>
<li><strong>scaled</strong> (<em>boolean</em>) &#8211; specifies whether electrical input values are scaled
or not</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridsim.electrical.network">
<span id="electrical-network"></span><h4>2.1.2.3. Electrical network<a class="headerlink" href="#module-gridsim.electrical.network" title="Permalink to this headline">¶</a></h4>
<p><em>Module author: Gillian Basso &lt;<a class="reference external" href="mailto:gillian&#46;basso&#37;&#52;&#48;hevs&#46;ch">gillian<span>&#46;</span>basso<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Gilbert Maitre &lt;<a class="reference external" href="mailto:gilbert&#46;maitre&#37;&#52;&#48;hevs&#46;ch">gilbert<span>&#46;</span>maitre<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<dl class="class">
<dt id="gridsim.electrical.network.ElectricalTransmissionLine">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.network.</tt><tt class="descname">ElectricalTransmissionLine</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>length</em>, <em>X</em>, <em>R=0*units.ohm</em>, <em>B=0*units.siemens</em><big>)</big><a class="headerlink" href="#gridsim.electrical.network.ElectricalTransmissionLine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalTwoPort" title="gridsim.electrical.core.AbstractElectricalTwoPort"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalTwoPort</span></tt></a></p>
<p>Class for representing a transmission line in an electrical network.
Its parameters are linked to the
transmission line PI model represented graphically below:</p>
<div class="highlight-python"><div class="highlight"><pre>                      R              jX
                +-----------+   +-----------+
o---&gt;---o-------|           |---|           |-------o---&gt;---o
        |       +-----------+   +-----------+       |
        |                                           |
      -----  jB/2                                 -----  jB/2
      -----                                       -----
        |                                           |
        |                                           |
       ---                                         ---
</pre></div>
</div>
<p>At initialization, in addition to the line <tt class="docutils literal"><span class="pre">friendly_name</span></tt>,
the line length, the line reactance (<tt class="docutils literal"><span class="pre">X</span></tt>), line resistance (<tt class="docutils literal"><span class="pre">R</span></tt>) and
line charging (B) have to be given. <tt class="docutils literal"><span class="pre">R</span></tt> and <tt class="docutils literal"><span class="pre">B</span></tt> default to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the line. Should be unique
within the simulation module, i.e. different for example from the
friendly name of a bus.</li>
<li><strong>length</strong> (length, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Line length.</li>
<li><strong>X</strong> (ohm, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Line reactance.</li>
<li><strong>R</strong> (ohm, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Line resistance.</li>
<li><strong>B</strong> (siemens, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Line charging.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.network.ElectricalTransmissionLine.length">
<tt class="descname">length</tt><em class="property"> = None</em><a class="headerlink" href="#gridsim.electrical.network.ElectricalTransmissionLine.length" title="Permalink to this definition">¶</a></dt>
<dd><p>The transmission line length.</p>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.network.ElectricalTransmissionLine.B">
<tt class="descname">B</tt><em class="property"> = None</em><a class="headerlink" href="#gridsim.electrical.network.ElectricalTransmissionLine.B" title="Permalink to this definition">¶</a></dt>
<dd><p>The transmission line charging.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.network.ElectricalGenTransformer">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.network.</tt><tt class="descname">ElectricalGenTransformer</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>k_factor</em>, <em>X</em>, <em>R=0*units.ohm</em><big>)</big><a class="headerlink" href="#gridsim.electrical.network.ElectricalGenTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalTwoPort" title="gridsim.electrical.core.AbstractElectricalTwoPort"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalTwoPort</span></tt></a></p>
<p>Class for representing a transformer and/or a phase shifter in an
electrical network. Its parameters are
linked to the usual transformer graphical representation below:</p>
<div class="highlight-python"><div class="highlight"><pre>                                                 1:K
              R              jX                 -   -
        +-----------+   +-----------+        /   / \   \
o---&gt;---|           |---|           |-------|---|--|---|-------&gt;---o
        +-----------+   +-----------+       \   \ /   /
                                               -   -
</pre></div>
</div>
<p>While the transformer changes the voltage amplitude, the phase shifter
changes the voltage phase. Accepting a complex <tt class="docutils literal"><span class="pre">K_factor</span></tt> parameter,
the <a class="reference internal" href="#gridsim.electrical.network.ElectricalGenTransformer" title="gridsim.electrical.network.ElectricalGenTransformer"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalGenTransformer</span></tt></a> is a common representation for a
transformer and a phase shifter.</p>
<p>At initialization, in addition to the line <tt class="docutils literal"><span class="pre">friendly_name</span></tt>, the
<tt class="docutils literal"><span class="pre">K-factor</span></tt>, the reactance (<tt class="docutils literal"><span class="pre">X</span></tt>), and the resistance (<tt class="docutils literal"><span class="pre">R</span></tt>) have to be
given. <tt class="docutils literal"><span class="pre">R</span></tt> defaults to zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the transformer or phase
shifter. Should be unique within the simulation module, i.e.
different for example from the friendly name of a bus</li>
<li><strong>k_factor</strong> (<em>complex</em>) &#8211; Transformer or phase shifter K-factor.</li>
<li><strong>X</strong> (ohm, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Transformer or phase shifter reactance.</li>
<li><strong>R</strong> (ohm, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; Transformer or phase shifter resistance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.network.ElectricalGenTransformer.k_factor">
<tt class="descname">k_factor</tt><em class="property"> = None</em><a class="headerlink" href="#gridsim.electrical.network.ElectricalGenTransformer.k_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>The transformer or phase shifter K-factor.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.network.ElectricalSlackBus">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.network.</tt><tt class="descname">ElectricalSlackBus</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>position=Position()</em><big>)</big><a class="headerlink" href="#gridsim.electrical.network.ElectricalSlackBus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.ElectricalBus</span></tt></a></p>
<p>Convenience class to define a Slack Bus.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>position</strong> (<a class="reference internal" href="tools.html#gridsim.util.Position" title="gridsim.util.Position"><tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt></a>) &#8211; Bus geographical position.
Defaults to Position default value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.network.ElectricalPVBus">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.network.</tt><tt class="descname">ElectricalPVBus</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>position=Position()</em><big>)</big><a class="headerlink" href="#gridsim.electrical.network.ElectricalPVBus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.ElectricalBus</span></tt></a></p>
<p>Convenience class to define a PV Bus.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>position</strong> (<a class="reference internal" href="tools.html#gridsim.util.Position" title="gridsim.util.Position"><tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt></a>) &#8211; Bus geographical position.
Defaults to Position default value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.network.ElectricalPQBus">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.network.</tt><tt class="descname">ElectricalPQBus</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>position=Position()</em><big>)</big><a class="headerlink" href="#gridsim.electrical.network.ElectricalPQBus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.ElectricalBus</span></tt></a></p>
<p>Convenience class to define a PQ Bus.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.electrical.core.ElectricalBus" title="gridsim.electrical.core.ElectricalBus"><tt class="xref py py-class docutils literal"><span class="pre">ElectricalBus</span></tt></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>position</strong> (<a class="reference internal" href="tools.html#gridsim.util.Position" title="gridsim.util.Position"><tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt></a>) &#8211; Bus geographical position.
Defaults to Position default value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-gridsim.electrical.element">
<span id="electrical-elements"></span><h4>2.1.2.4. Electrical elements<a class="headerlink" href="#module-gridsim.electrical.element" title="Permalink to this headline">¶</a></h4>
<p><em>Module author: Gillian Basso &lt;<a class="reference external" href="mailto:gillian&#46;basso&#37;&#52;&#48;hevs&#46;ch">gillian<span>&#46;</span>basso<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Gilbert Maitre &lt;<a class="reference external" href="mailto:gilbert&#46;maitre&#37;&#52;&#48;hevs&#46;ch">gilbert<span>&#46;</span>maitre<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<dl class="class">
<dt id="gridsim.electrical.element.ConstantElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">ConstantElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>power</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.ConstantElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalCPSElement</span></tt></a></p>
<p>This class provides the simplest Consuming-Producing-Storing element
having a constant behavior.</p>
<p>At initialization, the consumed or produced constant <cite>power</cite> has to
be provided beside the element <cite>friendly_name</cite>. Power is positive, if
consumed, negative, if produced. With the &#8216;calculate&#8217; method the
energy consumed or produced during the simulation step is calculated
from the constant power value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element. Should be unique
within the simulation module.</li>
<li><strong>power</strong> (power, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The constant consumed (if positive) or produced
(if negative) power.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gridsim.electrical.element.ConstantElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.ConstantElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the element&#8217;s the energy consumed or produced by the element
during the simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (time, , see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">CyclicElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>cycle_delta_time</em>, <em>power_values</em>, <em>cycle_start_time=0</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalCPSElement</span></tt></a></p>
<p>This class provides a Consuming-Producing-Storing element having a
cyclic behavior.</p>
<p>At initialization, beside the element <cite>friendly_name</cite>, the cycle time
resolution <cite>cycle_delta_time</cite>, the cycle sequence of <cite>power_values</cite>,
and the <cite>cycle_start_time</cite> have to be given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element. Should be unique
within the simulation module.</li>
<li><strong>cycle_delta_time</strong> (<em>int</em>) &#8211; cycle time resolution value in seconds.</li>
<li><strong>power_values</strong> (<em>1-D numpy array of power</em>) &#8211; power values consumed or produced during a cycle.</li>
<li><strong>cycle_start_time</strong> (<em>int</em>) &#8211; cycle start time in seconds. Defaults to 0.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement.cycle_delta_time">
<tt class="descname">cycle_delta_time</tt><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement.cycle_delta_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cycle time resolution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cycle time resolution.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement.power_values">
<tt class="descname">power_values</tt><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement.power_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cycle power values array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cycle power values array.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">1-dimensional numpy array of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement.cycle_length">
<tt class="descname">cycle_length</tt><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement.cycle_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cycle length in cycle time resolution units.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cycle length in cycle time resolution units.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement.cycle_start_time">
<tt class="descname">cycle_start_time</tt><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement.cycle_start_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cycle start time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cycle start time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.element.CyclicElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.CyclicElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the element&#8217;s the energy consumed or produced by the element
during the simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.element.UpdatableCyclicElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">UpdatableCyclicElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>cycle_delta_time</em>, <em>power_values</em>, <em>cycle_start_time=0*units.second</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.UpdatableCyclicElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gridsim.electrical.element.CyclicElectricalCPSElement" title="gridsim.electrical.element.CyclicElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.element.CyclicElectricalCPSElement</span></tt></a></p>
<p>This class provides a cyclic Consuming-Producing-Storing element for
which the consumed or produced power values may be updated. Update
will take place at next cycle start.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>cycle_delta_time</strong> (<em>int</em>) &#8211; cycle time resolution value in seconds.</li>
<li><strong>power_values</strong> (<em>1-D numpy array of float</em>) &#8211; power values consumed or produced during a cycle.</li>
<li><strong>cycle_start_time</strong> (<em>int</em>) &#8211; cycle start time in seconds. Defaults to 0.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.element.UpdatableCyclicElectricalCPSElement.power_values">
<tt class="descname">power_values</tt><a class="headerlink" href="#gridsim.electrical.element.UpdatableCyclicElectricalCPSElement.power_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cycle power values array.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cycle power values array.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">1-dimensional numpy array of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.element.UpdatableCyclicElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.UpdatableCyclicElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the element&#8217;s the energy consumed or produced by the element
during the simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.element.GaussianRandomElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">GaussianRandomElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>mean_power</em>, <em>standard_deviation</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.GaussianRandomElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalCPSElement</span></tt></a></p>
<p>This class provides a Consuming-Producing-Storing element having a
random behavior. The consecutive consumed or produced power values
are IID (Independently and Identically Distributed). The distribution
is Gaussian.</p>
<p>At initialization, the <cite>mean_power</cite> and &#8216;standard_distribution&#8217; are
provided beside the element <cite>friendly_name</cite>. If <cite>mean_power</cite> is
positive, the element is in the mean a consumer. If it is negative,
the element is in the mean a producer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>mean_power</strong> (power, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The mean value of the Gaussian distributed power.</li>
<li><strong>standard_deviation</strong> (power, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The standard deviation of the Gaussian
distributed power.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.element.GaussianRandomElectricalCPSElement.mean_power">
<tt class="descname">mean_power</tt><a class="headerlink" href="#gridsim.electrical.element.GaussianRandomElectricalCPSElement.mean_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the mean value of the Gaussian distributed power.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">mean power value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">power, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.element.GaussianRandomElectricalCPSElement.standard_deviation">
<tt class="descname">standard_deviation</tt><a class="headerlink" href="#gridsim.electrical.element.GaussianRandomElectricalCPSElement.standard_deviation" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the standard deviation of the Gaussian distributed power.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">standard deviation value.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.element.GaussianRandomElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.GaussianRandomElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the element&#8217;s the energy consumed or produced by the element
during the simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.element.TimeSeriesElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">TimeSeriesElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>reader</em>, <em>stream</em>, <em>column_name='power'</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.TimeSeriesElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalCPSElement</span></tt></a></p>
<p>This class provides a Consuming-Producing-Storing element whose consumed
or produced power is read from a stream by the given reader.</p>
<p>The presence of a column named <cite>column_name</cite> is assumed in the
<a class="reference internal" href="tools.html#gridsim.timeseries.TimeSeries" title="gridsim.timeseries.TimeSeries"><tt class="xref py py-class docutils literal"><span class="pre">TimeSeries</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>reader</strong> (<a class="reference internal" href="tools.html#gridsim.timeseries.TimeSeries" title="gridsim.timeseries.TimeSeries"><tt class="xref py py-class docutils literal"><span class="pre">TimeSeries</span></tt></a>) &#8211; The time series</li>
<li><strong>stream</strong> (<em>str</em>) &#8211; The file name</li>
<li><strong>column_name</strong> (<em>str</em>) &#8211; The name of the column in the data with a the
requested power value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gridsim.electrical.element.TimeSeriesElectricalCPSElement.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.electrical.element.TimeSeriesElectricalCPSElement.reset" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement.reset" title="gridsim.core.AbstractSimulationElement.reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement.reset()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.element.TimeSeriesElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.TimeSeriesElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the energy consumed or produced by the element during the
simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.electrical.element.AnyIIDRandomElectricalCPSElement">
<em class="property">class </em><tt class="descclassname">gridsim.electrical.element.</tt><tt class="descname">AnyIIDRandomElectricalCPSElement</tt><big>(</big><em>self</em>, <em>friendly_name</em>, <em>fname_or_power_values</em>, <em>frequencies=None</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.AnyIIDRandomElectricalCPSElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.electrical.core.AbstractElectricalCPSElement" title="gridsim.electrical.core.AbstractElectricalCPSElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.electrical.core.AbstractElectricalCPSElement</span></tt></a></p>
<p>This class provides a Consuming-Producing-Storing element having a
random behavior. The consecutive consumed or produced power values
are IID (Independently and Identically Distributed). The distribution,
discrete and finite, is given as parameter.</p>
<p>Beside the element <tt class="docutils literal"><span class="pre">friendly_name</span></tt>, the constructor parameters are
either the name of the file the distribution has to be read from, either
the potentially consumed or produced <tt class="docutils literal"><span class="pre">power_values</span></tt>,together with their
<tt class="docutils literal"><span class="pre">frequencies</span></tt> or probabilities. Input <tt class="docutils literal"><span class="pre">power</span> <span class="pre">values</span></tt> has to be a
monotonically increasing sequence of float. Input &#8216;frequencies&#8217; can be
either integers (number of occurrences), or floats summing to 1.0
(relative frequencies or probabilities), or monotonically increasing
sequence of positive floats ending with 1.0 (cumulative relative
frequencies or probabilities)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str</em>) &#8211; Friendly name for the element.
Should be unique within the simulation module.</li>
<li><strong>fname_or_power_values</strong> (<em>either string or 1-D numpy array of float</em>) &#8211; Name of the file from which the
distribution has to be read or Power values which may be consumed
(positive) or produced (negative), ordered in a monotonically
increasing sequence.</li>
<li><strong>frequencies</strong> (<em>None or 1-D numpy array of integer or float</em>) &#8211; Number of occurrences (frequencies), or relative
frequencies, or cumulative relative frequencies of corresponding
power values, if those are given as second parameter, None if
filename is given as 2nd parameter</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.power_values">
<tt class="descname">power_values</tt><a class="headerlink" href="#gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.power_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the sequence of power values which may occur.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">sequence of potentially occurring power values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">1-dimensional numpy array of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.cdf">
<tt class="descname">cdf</tt><a class="headerlink" href="#gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.cdf" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the cumulative relative frequencies of the potentially occurring
power values. It can be considered as the Cumulative Distribution
Function (CDF).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">cumulative relative frequencies corresponding to power values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">1-dimensional numpy array of float</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.calculate">
<tt class="descname">calculate</tt><big>(</big><em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.electrical.element.AnyIIDRandomElectricalCPSElement.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the element&#8217;s the energy consumed or produced by the element
during the simulation step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (<em>float</em>) &#8211; The actual time of the simulator in seconds.</li>
<li><strong>delta_time</strong> (<em>float</em>) &#8211; The delta time for which the calculation has to be
done in seconds.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-gridsim.thermal">
<span id="thermal-simulation"></span><span id="gridsim-thermal-simu"></span><h3>2.1.3. Thermal simulation<a class="headerlink" href="#module-gridsim.thermal" title="Permalink to this headline">¶</a></h3>
<p>The thermal simulation module offers a very abstract thermal simulation. The
simulation is based on the thermal capacity of a thermal process (envelope)
and the energy flows between those processes via thermal couplings that result
as consequence of the temperature differences between the thermal processes and
the thermal conductivity of the couplings between them.</p>
<p><em>Example</em>:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.recorder</span> <span class="kn">import</span> <span class="n">PlotRecorder</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.core</span> <span class="kn">import</span> <span class="n">ThermalProcess</span><span class="p">,</span> <span class="n">ThermalCoupling</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.element</span> <span class="kn">import</span> <span class="n">TimeSeriesThermalProcess</span>
<span class="kn">from</span> <span class="nn">gridsim.timeseries</span> <span class="kn">import</span> <span class="n">SortedConstantStepTimeSeriesObject</span>
<span class="kn">from</span> <span class="nn">gridsim.iodata.input</span> <span class="kn">import</span> <span class="n">CSVReader</span>
<span class="kn">from</span> <span class="nn">gridsim.iodata.output</span> <span class="kn">import</span> <span class="n">FigureSaver</span><span class="p">,</span> <span class="n">CSVSaver</span>

<span class="c"># Gridsim simulator.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="c"># Create a simple thermal process: A room thermal coupling between the room and</span>
<span class="c"># the outside temperature.</span>
<span class="c">#    ___________</span>
<span class="c">#   |           |</span>
<span class="c">#   |   room    |</span>
<span class="c">#   |    20 C   |            outside &lt;= example time series (CSV) file</span>
<span class="c">#   |           |]- 3 W/K</span>
<span class="c">#   |___________|</span>
<span class="c">#</span>
<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">room</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;room&#39;</span><span class="p">,</span>
                                           <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                           <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                           <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>
<span class="n">outside</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">TimeSeriesThermalProcess</span><span class="p">(</span><span class="s">&#39;outside&#39;</span><span class="p">,</span> <span class="n">SortedConstantStepTimeSeriesObject</span><span class="p">(</span><span class="n">CSVReader</span><span class="p">()),</span>
                             <span class="s">&#39;./data/example_time_series.csv&#39;</span><span class="p">,</span>
                             <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hours</span><span class="p">,</span>
                             <span class="n">temperature_calculator</span><span class="o">=</span>
                                <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">units</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">),</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;room to outside&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">room</span><span class="p">,</span> <span class="n">outside</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the temperatures of all thermal processes.</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Running simulation...&quot;</span><span class="p">)</span>

<span class="c"># Run the simulation for an hour with a resolution of 1 second.</span>
<span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="mi">31</span><span class="o">*</span><span class="mi">4</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">day</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">31</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hours</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Saving data...&quot;</span><span class="p">)</span>

<span class="c"># Create a PDF document, add the two figures of the plot recorder to the</span>
<span class="c"># document and close the document.</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="s">&quot;Temperature&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermal-example.pdf&#39;</span><span class="p">)</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="s">&quot;Temperature&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermal-example.png&#39;</span><span class="p">)</span>
<span class="n">CSVSaver</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermal-example.csv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<ul>
<li><p class="first">On line 10 we create a new simulation.</p>
</li>
<li><dl class="first docutils">
<dt>On lines 21 to 34 we create a very simple thermal process with one room and</dt>
<dd><p class="first last">the outside temperature from a data file.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>On line 37 we create a plot recorder and on line 38 we record all temperatures</dt>
<dd><p class="first last">using the plot recorder.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>On line 43 &amp; 44 we initialize the simulation and start the simulation for the</dt>
<dd><p class="first last">month avril with a resolution of 1 hour.</p>
</dd>
</dl>
</li>
<li><p class="first">On linea 50 to 52 we save the data in several formats.</p>
</li>
</ul>
<p>The figure looks like this one:</p>
<div class="figure align-center">
<img alt="_images/thermal-example.png" src="_images/thermal-example.png" />
</div>
<div class="section" id="module-gridsim.thermal.simulation">
<span id="thermal-package"></span><h4>2.1.3.1. Thermal package<a class="headerlink" href="#module-gridsim.thermal.simulation" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="gridsim.thermal.simulation.ThermalSimulator">
<em class="property">class </em><tt class="descclassname">gridsim.thermal.simulation.</tt><tt class="descname">ThermalSimulator</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule" title="gridsim.core.AbstractSimulationModule"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule</span></tt></a></p>
<p>Gridsim main simulation class for thermal part. This module is
automatically added to the <a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a> when
importing any class or module of <a class="reference internal" href="#module-gridsim.thermal" title="gridsim.thermal"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.thermal</span></tt></a> package.</p>
<p>To access this class from simulation, use
<a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a> as follow:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">thsim</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span>
</pre></div>
</div>
<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.attribute_name">
<tt class="descname">attribute_name</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.attribute_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of this module.
This name is used to access to this electrical simulator from the
<a class="reference internal" href="#gridsim.simulation.Simulator" title="gridsim.simulation.Simulator"><tt class="xref py py-class docutils literal"><span class="pre">Simulator</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create the simulation.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">thsim</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">&#8216;thermal&#8217;</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.all_elements">
<tt class="descname">all_elements</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.all_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all <a class="reference internal" href="core.html#gridsim.thermal.core.AbstractThermalElement" title="gridsim.thermal.core.AbstractThermalElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractThermalElement</span></tt></a>
contained in the module.
The core simulator will use these lists in order to be able
to retrieve objects or list of objects by certain criteria using
<a class="reference internal" href="#gridsim.simulation.Simulator.find" title="gridsim.simulation.Simulator.find"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Simulator.find()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.reset">
<tt class="descname">reset</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement.reset" title="gridsim.core.AbstractSimulationElement.reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement.reset()</span></tt></a> of
each element in this thermal simulator, added by the
<a class="reference internal" href="#gridsim.thermal.simulation.ThermalSimulator.add" title="gridsim.thermal.simulation.ThermalSimulator.add"><tt class="xref py py-func docutils literal"><span class="pre">ThermalSimulator.add()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement.calculate" title="gridsim.core.AbstractSimulationElement.calculate"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement.calculate()</span></tt></a>
of each <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a> in this thermal
simulator, added by the <a class="reference internal" href="#gridsim.thermal.simulation.ThermalSimulator.add" title="gridsim.thermal.simulation.ThermalSimulator.add"><tt class="xref py py-func docutils literal"><span class="pre">ThermalSimulator.add()</span></tt></a> then apply
the <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalCoupling" title="gridsim.thermal.core.ThermalCoupling"><tt class="xref py py-class docutils literal"><span class="pre">ThermalCoupling</span></tt></a> to update the energy of each process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual simulation time.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The time period for which the calculation
has to be done.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.update">
<tt class="descname">update</tt><big>(</big><em>self</em>, <em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the data of each <a class="reference internal" href="core.html#gridsim.thermal.core.AbstractThermalElement" title="gridsim.thermal.core.AbstractThermalElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractThermalElement</span></tt></a> in this
electrical simulator added by the <a class="reference internal" href="#gridsim.thermal.simulation.ThermalSimulator.add" title="gridsim.thermal.simulation.ThermalSimulator.add"><tt class="xref py py-func docutils literal"><span class="pre">ThermalSimulator.add()</span></tt></a> and
calculate the load flow with
<a class="reference internal" href="#gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator" title="gridsim.electrical.loadflow.AbstractElectricalLoadFlowCalculator"><tt class="xref py py-class docutils literal"><span class="pre">AbstractElectricalLoadFlowCalculator</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The actual simulation time.</li>
<li><strong>delta_time</strong> (time, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a>) &#8211; The time period for which the calculation
has to be done.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.simulation.ThermalSimulator.add">
<tt class="descname">add</tt><big>(</big><em>self</em>, <em>element</em><big>)</big><a class="headerlink" href="#gridsim.thermal.simulation.ThermalSimulator.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a> or <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalCoupling" title="gridsim.thermal.core.ThermalCoupling"><tt class="xref py py-class docutils literal"><span class="pre">ThermalCoupling</span></tt></a> to the thermal simulation
module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>element</strong> (<tt class="xref py py-class docutils literal"><span class="pre">AbstractThermalElement</span></tt>) &#8211; Element to add to the thermal simulator module.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridsim.thermal.element">
<span id="thermal-elements"></span><h4>2.1.3.2. Thermal elements<a class="headerlink" href="#module-gridsim.thermal.element" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="gridsim.thermal.element.ConstantTemperatureProcess">
<em class="property">class </em><tt class="descclassname">gridsim.thermal.element.</tt><tt class="descname">ConstantTemperatureProcess</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.ConstantTemperatureProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.thermal.core.ThermalProcess</span></tt></a></p>
<p>This is a special thermal process with an infinite thermal capacity
which results that the temperature of the process is constant,
independent how much energy is taken from or given to the process.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str, unicode</em>) &#8211; Friendly name to give to the process.</li>
<li><strong>temperature</strong> (<em>temperature</em>) &#8211; The (constant) temperature in degrees celsius.</li>
<li><strong>position</strong> (<tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt>) &#8211; The position of the <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gridsim.thermal.element.ConstantTemperatureProcess.add_energy">
<tt class="descname">add_energy</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.ConstantTemperatureProcess.add_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>Does nothing at all for this type of <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.element.ConstantTemperatureProcess.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.ConstantTemperatureProcess.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Does nothing at all for this type of <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.thermal.element.TimeSeriesThermalProcess">
<em class="property">class </em><tt class="descclassname">gridsim.thermal.element.</tt><tt class="descname">TimeSeriesThermalProcess</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.TimeSeriesThermalProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.thermal.core.ThermalProcess</span></tt></a></p>
<p>Thermal process that reads the temperature out of a time series object
(CSV file). It has an infinite thermal capacity.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is important that the given data contains the
field &#8216;temperature&#8217; or you map a field to the attribute
&#8216;temperature&#8217; using the function <tt class="xref py py-func docutils literal"><span class="pre">TimeSeriesObject.map_attribute()</span></tt>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str, unicode</em>) &#8211; Friendly name to give to the process.</li>
<li><strong>stream</strong> (<em>str or stream</em>) &#8211; The stream</li>
<li><strong>temperature_calculator</strong> &#8211; </li>
<li><strong>position</strong> (<tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt>) &#8211; The position of the thermal process.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gridsim.thermal.element.TimeSeriesThermalProcess.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.thermal.element.TimeSeriesThermalProcess.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the time to default (<tt class="docutils literal"><span class="pre">0</span></tt>).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="tools.html#gridsim.timeseries.TimeSeriesObject.set_time" title="gridsim.timeseries.TimeSeriesObject.set_time"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.timeseries.TimeSeriesObject.set_time()</span></tt></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.element.TimeSeriesThermalProcess.calculate">
<tt class="descname">calculate</tt><big>(</big><em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.TimeSeriesThermalProcess.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the temperature of the element during the simulation step.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="tools.html#gridsim.timeseries.TimeSeriesObject.set_time" title="gridsim.timeseries.TimeSeriesObject.set_time"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.timeseries.TimeSeriesObject.set_time()</span></tt></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.thermal.element.TimeSeriesThermalProcess.update">
<tt class="descname">update</tt><big>(</big><em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.thermal.element.TimeSeriesThermalProcess.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Does nothing for this type of <a class="reference internal" href="core.html#gridsim.thermal.core.ThermalProcess" title="gridsim.thermal.core.ThermalProcess"><tt class="xref py py-class docutils literal"><span class="pre">ThermalProcess</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
<div class="section" id="user-interface">
<h2>2.2. User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-gridsim.controller">
<span id="control-of-simulation-elements"></span><span id="gridsim-control"></span><h3>2.2.1. Control of simulation elements<a class="headerlink" href="#module-gridsim.controller" title="Permalink to this headline">¶</a></h3>
<p><em>Module author: Michael Clausen &lt;<a class="reference external" href="mailto:clm&#37;&#52;&#48;hevs&#46;ch">clm<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Michael Clausen &lt;<a class="reference external" href="mailto:clm&#37;&#52;&#48;hevs&#46;ch">clm<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p>This module contains controlling elements. These can control any Python
attribute of an object based on the actual values of other attributes. The
classical example is a simple thermostat:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.util</span> <span class="kn">import</span> <span class="n">Position</span>
<span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.recorder</span> <span class="kn">import</span> <span class="n">PlotRecorder</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.element</span> <span class="kn">import</span> <span class="n">TimeSeriesThermalProcess</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.core</span> <span class="kn">import</span> <span class="n">ThermalProcess</span><span class="p">,</span> <span class="n">ThermalCoupling</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.core</span> <span class="kn">import</span> <span class="n">AbstractElectricalCPSElement</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.network</span> <span class="kn">import</span> <span class="n">ElectricalPQBus</span><span class="p">,</span> \
    <span class="n">ElectricalTransmissionLine</span>
<span class="kn">from</span> <span class="nn">gridsim.electrical.loadflow</span> <span class="kn">import</span> <span class="n">DirectLoadFlowCalculator</span>
<span class="kn">from</span> <span class="nn">gridsim.timeseries</span> <span class="kn">import</span> <span class="n">SortedConstantStepTimeSeriesObject</span>
<span class="kn">from</span> <span class="nn">gridsim.iodata.input</span> <span class="kn">import</span> <span class="n">CSVReader</span>
<span class="kn">from</span> <span class="nn">gridsim.iodata.output</span> <span class="kn">import</span> <span class="n">FigureSaver</span>

<span class="kn">from</span> <span class="nn">gridsim.controller</span> <span class="kn">import</span> <span class="n">AbstractControllerElement</span>


<span class="k">class</span> <span class="nc">Thermostat</span><span class="p">(</span><span class="n">AbstractControllerElement</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">friendly_name</span><span class="p">,</span> <span class="n">target_temperature</span><span class="p">,</span> <span class="n">hysteresis</span><span class="p">,</span>
                 <span class="n">thermal_process</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span>
                 <span class="n">on_value</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">off_value</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">Position</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A thermostat controller. This class measures the temperature of a</span>
<span class="sd">        thermal process (typically a room) and controls ANY attribute of any</span>
<span class="sd">        AbstractSimulationElement depending the measured temperature, the given</span>
<span class="sd">        target_temperature and the hysteresis.</span>

<span class="sd">        :param: friendly_name: User friendly name to give to the element.</span>
<span class="sd">        :type friendly_name: str</span>

<span class="sd">        :param: target_temperature: The temperature to try to maintain inside</span>
<span class="sd">            the target ThermalProcess.</span>
<span class="sd">        :type: target_temperature: temperature see :mod:`gridsim.unit`</span>

<span class="sd">        :param: hysteresis: The +- hysteresis in order to avoid to fast on/off</span>
<span class="sd">            switching.</span>
<span class="sd">        :type: hysteresis: delta temperature see :mod:`gridsim.unit`</span>

<span class="sd">        :param: thermal_process: The reference to the thermal process to</span>
<span class="sd">            observe.</span>
<span class="sd">        :type: thermal_process: :class:`.ThermalProcess`</span>

<span class="sd">        :param: subject: Reference to the object of which is attribute has to be</span>
<span class="sd">            changed depending on the temperature.</span>
<span class="sd">        :type: object</span>

<span class="sd">        :param: attribute: The name of the attribute to control as string.</span>
<span class="sd">        :type: str</span>

<span class="sd">        :param: on_value: The value to set for the attribute in order to turn</span>
<span class="sd">            the device &quot;on&quot;.</span>
<span class="sd">        :type: on_value: any</span>

<span class="sd">        :param: off_on_value: The value to set for the attribute in order to</span>
<span class="sd">            turn the device &quot;off&quot;.</span>
<span class="sd">        :type: off_value: any</span>

<span class="sd">        :param position: The position of the thermal element.</span>
<span class="sd">            Defaults to [0,0,0].</span>
<span class="sd">        :type position: :class:`Position`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Thermostat</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">friendly_name</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target_temperature</span> <span class="o">=</span> <span class="n">target_temperature</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The temperature to try to retain inside the observer thermal process by</span>
<span class="sd">        conducting an electrothermal element.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hysteresis</span> <span class="o">=</span> <span class="n">hysteresis</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The +- hysteresis applied to the temperature measure in order to avoid</span>
<span class="sd">        to fast on/off switching.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">thermal_process</span><span class="p">,</span> <span class="s">&#39;temperature&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;thermal_process&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thermal_process</span> <span class="o">=</span> <span class="n">thermal_process</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The reference to the thermal process to observe and read the</span>
<span class="sd">        temperature from.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="n">subject</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The reference to the element to control.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span> <span class="o">=</span> <span class="n">attribute</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Name of the attribute to control.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">on_value</span> <span class="o">=</span> <span class="n">on_value</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Value to set in order to turn the element on.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">off_value</span> <span class="o">=</span> <span class="n">off_value</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Value to set in order to turn the element off.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_output_value</span> <span class="o">=</span> <span class="n">off_value</span>

    <span class="c"># AbstractSimulationElement implementation.</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        AbstractSimulationElement implementation</span>

<span class="sd">        .. seealso:: :func:`gridsim.core.AbstractSimulationElement.reset`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        AbstractSimulationElement implementation</span>

<span class="sd">        .. seealso:: :func:`gridsim.core.AbstractSimulationElement.calculate`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">actual_temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">thermal_process</span><span class="o">.</span><span class="n">temperature</span>

        <span class="k">if</span> <span class="n">actual_temperature</span> <span class="o">&lt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_temperature</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">hysteresis</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_output_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_value</span>
        <span class="k">elif</span> <span class="n">actual_temperature</span> <span class="o">&gt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_temperature</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">hysteresis</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_output_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">off_value</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        AbstractSimulationElement implementation</span>

<span class="sd">        .. seealso:: :func:`gridsim.core.AbstractSimulationElement.update`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subject</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_value</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ElectroThermalHeaterCooler</span><span class="p">(</span><span class="n">AbstractElectricalCPSElement</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">friendly_name</span><span class="p">,</span> <span class="n">pwr</span><span class="p">,</span> <span class="n">efficiency_factor</span><span class="p">,</span> <span class="n">thermal_process</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">ElectroThermalHeaterCooler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">friendly_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">efficiency_factor</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;efficiency_factor must be a float or int!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_efficiency_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">efficiency_factor</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">thermal_process</span><span class="p">,</span> <span class="n">ThermalProcess</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;thermal_process must be of type ThermalProcess!&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_process</span> <span class="o">=</span> <span class="n">thermal_process</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="n">pwr</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_on</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Controls the heater/cooler. If this is True, the heater/cooler is active</span>
<span class="sd">        and takes energy from the electrical</span>
<span class="sd">        network to actually heat or cool the thermal process associated.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on</span>

    <span class="nd">@on.setter</span>
    <span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_on</span> <span class="o">=</span> <span class="n">on_off</span>

    <span class="c"># AbstractSimulationElement implementation.</span>
    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ElectroThermalHeaterCooler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_internal_delta_energy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">*</span> <span class="n">delta_time</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_internal_delta_energy</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">joule</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ElectroThermalHeaterCooler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">delta_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thermal_process</span><span class="o">.</span><span class="n">add_energy</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_delta_energy</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_efficiency_factor</span><span class="p">)</span>

<span class="c"># Gridsim simulator.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>
<span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">load_flow_calculator</span> <span class="o">=</span> <span class="n">DirectLoadFlowCalculator</span><span class="p">()</span>

<span class="c"># Create a simple thermal process: A room and a thermal coupling between the</span>
<span class="c"># room and the outside temperature.</span>
<span class="c">#    ___________</span>
<span class="c">#   |           |</span>
<span class="c">#   |   room    |</span>
<span class="c">#   |    20 C   |            outside &lt;= example time series (CSV) file</span>
<span class="c">#   |           |]- 3 W/K</span>
<span class="c">#   |___________|</span>
<span class="c">#</span>
<span class="c"># The room has a surface of 50m2 and a height of 2.5m.</span>
<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">room</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;room&#39;</span><span class="p">,</span>
                                           <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                           <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                           <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">outside</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">TimeSeriesThermalProcess</span><span class="p">(</span><span class="s">&#39;outside&#39;</span><span class="p">,</span> <span class="n">SortedConstantStepTimeSeriesObject</span><span class="p">(</span><span class="n">CSVReader</span><span class="p">()),</span>
                             <span class="s">&#39;./data/example_time_series.csv&#39;</span><span class="p">,</span>
                             <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">t</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
                             <span class="n">temperature_calculator</span><span class="o">=</span>
                                <span class="k">lambda</span> <span class="n">t</span><span class="p">:</span> <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">units</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">),</span>
                                                        <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>
<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;room to outside&#39;</span><span class="p">,</span>
                                <span class="mf">10.0</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">room</span><span class="p">,</span> <span class="n">outside</span><span class="p">))</span>

<span class="c"># Create a minimal electrical simulation network with a thermal heater connected</span>
<span class="c"># to Bus0.</span>
<span class="c">#</span>
<span class="c">#                  Line0</span>
<span class="c">#   SlackBus o----------------o Bus0</span>
<span class="c">#                             |</span>
<span class="c">#                heater (ElectricalHeaterCooler)</span>
<span class="c">#</span>
<span class="n">bus0</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectricalPQBus</span><span class="p">(</span><span class="s">&#39;Bus0&#39;</span><span class="p">))</span>
<span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;Line0&quot;</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">bus</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">bus0</span><span class="p">,</span>
                       <span class="n">ElectricalTransmissionLine</span><span class="p">(</span><span class="s">&#39;Line0&#39;</span><span class="p">,</span>
                                                  <span class="mi">1000</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                                  <span class="mf">0.2</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">ohm</span><span class="p">))</span>

<span class="n">heater</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ElectroThermalHeaterCooler</span><span class="p">(</span><span class="s">&#39;heater&#39;</span><span class="p">,</span>
                                                       <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">kilowatt</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span>
                                                       <span class="n">room</span><span class="p">))</span>
<span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">bus0</span><span class="p">,</span> <span class="n">heater</span><span class="p">)</span>

<span class="c"># Add the thermostat that controls the temperature inside the room and to hold</span>
<span class="c"># it between 16..20 degrees celsius:</span>
<span class="c">#                ____________</span>
<span class="c">#               |            |       ____________</span>
<span class="c">#               |    room    |      |            |</span>
<span class="c">#               |        o----------| Thermostat |---\</span>
<span class="c">#               |            |      |____________|   |</span>
<span class="c">#               |  |^^^^^^|  |                       |</span>
<span class="c">#               |__|heater|__|                       |</span>
<span class="c">#                __|__    |__________________________|</span>
<span class="c">#                 ---</span>
<span class="c">#</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="c"># the hysteresis is a delta of temperature</span>
<span class="n">hysteresis</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">delta_degC</span>

<span class="n">thermostat</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">Thermostat</span><span class="p">(</span><span class="s">&#39;thermostat&#39;</span><span class="p">,</span>
                                           <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">),</span>
                                           <span class="n">hysteresis</span><span class="p">,</span>
                                           <span class="n">room</span><span class="p">,</span> <span class="n">heater</span><span class="p">,</span> <span class="s">&#39;on&#39;</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the temperatures of all thermal processes.</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the control value of the thermostat given</span>
<span class="c"># to the heater.</span>
<span class="n">control</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;on&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">electrical</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;on&#39;</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the power used by the electrical heater.</span>
<span class="n">power</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;delta_energy&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">power</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">friendly_name</span><span class="o">=</span><span class="s">&#39;heater&#39;</span><span class="p">),</span>
           <span class="k">lambda</span> <span class="n">context</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="n">context</span><span class="o">.</span><span class="n">delta_time</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Running simulation...&quot;</span><span class="p">)</span>

<span class="c"># Run the simulation for an hour with a resolution of 1 second.</span>
<span class="n">sim</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">units</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Saving data...&quot;</span><span class="p">)</span>

<span class="c"># Create a PDF document, add the two figures of the plot recorder to the</span>
<span class="c"># document and close the document.</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="s">&quot;Temperature&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermostat-fig1.png&#39;</span><span class="p">)</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="s">&quot;Control&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermostat-fig2.png&#39;</span><span class="p">)</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">power</span><span class="p">,</span> <span class="s">&quot;Power&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/thermostat-fig3.png&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This simulation outputs the following plots:</p>
<div class="figure align-center">
<img alt="_images/thermostat-fig1.png" src="_images/thermostat-fig1.png" />
</div>
<div class="figure align-center">
<img alt="_images/thermostat-fig2.png" src="_images/thermostat-fig2.png" />
</div>
<div class="figure align-center">
<img alt="_images/thermostat-fig3.png" src="_images/thermostat-fig3.png" />
</div>
<dl class="class">
<dt id="gridsim.controller.AbstractControllerElement">
<em class="property">class </em><tt class="descclassname">gridsim.controller.</tt><tt class="descname">AbstractControllerElement</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.controller.AbstractControllerElement" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationElement</span></tt></a></p>
<p>Base class of all elements which can be part of a controller simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>friendly_name</strong> (<em>str, unicode</em>) &#8211; User friendly name to give to the element.</li>
<li><strong>position</strong> (<tt class="xref py py-class docutils literal"><span class="pre">Position</span></tt>) &#8211; The position of the thermal element.
Defaults to [0,0,0].</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="gridsim.controller.ControllerSimulator">
<em class="property">class </em><tt class="descclassname">gridsim.controller.</tt><tt class="descname">ControllerSimulator</tt><a class="headerlink" href="#gridsim.controller.ControllerSimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule" title="gridsim.core.AbstractSimulationModule"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule</span></tt></a></p>
<p>Simulation module for all controller simulation aspects.</p>
<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.attribute_name">
<tt class="descname">attribute_name</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.attribute_name" title="Permalink to this definition">¶</a></dt>
<dd><p>AbstractSimulationModule implementation</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.attribute_name" title="gridsim.core.AbstractSimulationModule.attribute_name"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.attribute_name()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.all_elements">
<tt class="descname">all_elements</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.all_elements" title="Permalink to this definition">¶</a></dt>
<dd><p>AbstractSimulationModule implementation</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.all_elements" title="gridsim.core.AbstractSimulationModule.all_elements"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.all_elements()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>AbstractSimulationModule implementation</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.reset" title="gridsim.core.AbstractSimulationModule.reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.reset()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.calculate">
<tt class="descname">calculate</tt><big>(</big><em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>AbstractSimulationModule implementation</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.calculate" title="gridsim.core.AbstractSimulationModule.calculate"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.calculate()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.update">
<tt class="descname">update</tt><big>(</big><em>time</em>, <em>delta_time</em><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.update" title="Permalink to this definition">¶</a></dt>
<dd><p>AbstractSimulationModule implementation</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="core.html#gridsim.core.AbstractSimulationModule.update" title="gridsim.core.AbstractSimulationModule.update"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.core.AbstractSimulationModule.update()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.controller.ControllerSimulator.add">
<tt class="descname">add</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.controller.ControllerSimulator.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the control element to the controller simulation module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>element</strong> &#8211; Element to add to the control simulator module.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridsim.recorder">
<span id="record-of-simulation-elements"></span><span id="gridsim-record"></span><h3>2.2.2. Record of simulation elements<a class="headerlink" href="#module-gridsim.recorder" title="Permalink to this headline">¶</a></h3>
<p><em>Module author: Michael Clausen &lt;<a class="reference external" href="mailto:clm&#37;&#52;&#48;hevs&#46;ch">clm<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Michael Clausen &lt;<a class="reference external" href="mailto:clm&#37;&#52;&#48;hevs&#46;ch">clm<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p><em>Code author: Gillian Basso &lt;<a class="reference external" href="mailto:gillian&#46;basso&#37;&#52;&#48;hevs&#46;ch">gillian<span>&#46;</span>basso<span>&#64;</span>hevs<span>&#46;</span>ch</a>&gt;</em></p>
<p>The <a class="reference internal" href="#module-gridsim.recorder" title="gridsim.recorder"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.recorder</span></tt></a> module allows to record signals within the
gridsim simulation for later analysis. The module offers already a great
number of ready to use recorders - for example to write the data to text or
csv files or to plot the data after the simulation.</p>
<p>However if a special behavior is needed, custom recorders implementing the
<a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> can be implemented.</p>
<p><em>Here an example illustrating the implementation of a custom recorder and how
recorders are added to the simulation:</em></p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.recorder</span> <span class="kn">import</span> <span class="n">Recorder</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.core</span> <span class="kn">import</span> <span class="n">ThermalProcess</span><span class="p">,</span> <span class="n">ThermalCoupling</span>
<span class="kn">from</span> <span class="nn">gridsim.decorators</span> <span class="kn">import</span> <span class="n">timed</span>


<span class="c">#Custom recorder.</span>
<span class="k">class</span> <span class="nc">ConsoleRecorder</span><span class="p">(</span><span class="n">Recorder</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute_name</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ConsoleRecorder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">attribute_name</span><span class="p">)</span>

    <span class="nd">@timed</span>
    <span class="k">def</span> <span class="nf">on_simulation_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subjects</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;RESET, observing: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">subjects</span><span class="p">)</span>

    <span class="nd">@timed</span>
    <span class="k">def</span> <span class="nf">on_simulation_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;time = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;:&#39;</span>

    <span class="k">def</span> <span class="nf">on_observed_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&#39;    &#39;</span> <span class="o">+</span> <span class="n">subject</span> <span class="o">+</span> <span class="s">&#39;.&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute_name</span> <span class="o">+</span>\
              <span class="s">&#39; = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="c"># Create simulator.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="c"># Setup topology (For simplicity we just take a trivial thermal simulation):</span>
<span class="c">#           __________                             ___________</span>
<span class="c">#          |          |       ___________         |           |</span>
<span class="c">#          | hot_room |]-----| coupling  |-------[| cold_room |</span>
<span class="c">#          |   60 C   |      |   1m2     |        |           |</span>
<span class="c">#          |          |      |__100_W/K__|        |    20 C   |</span>
<span class="c">#          |__________|      &lt;-----------&gt;        |___________|</span>
<span class="c">#                                 1m</span>

<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="o">.</span><span class="n">Quantity</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">hot_room</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;hot_room&#39;</span><span class="p">,</span>
                                               <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                               <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                               <span class="n">celsius</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="o">.</span><span class="n">Quantity</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">cold_room</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;cold_room&#39;</span><span class="p">,</span>
                                                <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                                <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                                <span class="n">celsius</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;coupling&#39;</span><span class="p">,</span>
                                <span class="mi">100</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">hot_room</span><span class="p">,</span> <span class="n">cold_room</span><span class="p">))</span>

<span class="c"># Add a custom console recorder to the attribute &quot;temperature&quot; of the hot</span>
<span class="c"># room thermal process.</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">ConsoleRecorder</span><span class="p">(</span><span class="s">&quot;temperature&quot;</span><span class="p">),</span>
           <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element_class</span><span class="o">=</span><span class="n">ThermalProcess</span><span class="p">))</span>

<span class="c"># Simulate</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<ul>
<li><p class="first">On line 7 to 21 we implement our custom recorder.</p>
<ul class="simple">
<li>On line 13 we re-implement the abstract method
<a class="reference internal" href="#gridsim.simulation.Recorder.on_simulation_reset" title="gridsim.simulation.Recorder.on_simulation_reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_simulation_reset()</span></tt></a>.
We log which objects we observe.</li>
<li>On line 16 we implement the
<a class="reference internal" href="#gridsim.simulation.Recorder.on_simulation_step" title="gridsim.simulation.Recorder.on_simulation_step"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_simulation_step()</span></tt></a> method.
We just output the current time.</li>
<li>On line 19 we re-implement the abstract method
<a class="reference internal" href="#gridsim.simulation.Recorder.on_observed_value" title="gridsim.simulation.Recorder.on_observed_value"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_observed_value()</span></tt></a>.
Basically we just output the value to the console.</li>
</ul>
</li>
<li><p class="first">On line 24 we create the gridsim simulation object.</p>
</li>
<li><p class="first">On line 35 to 48 we setup a very simple thermal process, where we define 2
rooms and a thermal coupling between them:</p>
<ul class="simple">
<li>hot_room (line 36) has a <strong>surface</strong> of <tt class="docutils literal"><span class="pre">50m2</span></tt> and a <strong>height</strong> of
<tt class="docutils literal"><span class="pre">2.5m</span></tt>, so the <strong>volume</strong> is <tt class="docutils literal"><span class="pre">125m3</span></tt>. The room is filled with
<a class="reference internal" href="tools.html#gridsim.util.Air" title="gridsim.util.Air"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.util.Air</span></tt></a> (specific thermal capacity=`1.005 J/gK``) with the <strong>initial temperature of 60
degree celsius</strong>.</li>
<li>cold_room (line 42) has the same volume, but an initial <strong>temperature of 20
degree celsius</strong>.</li>
<li>the two rooms are coupled with a thermal conductivity of <strong>100 Watts per
Kelvin</strong> (line 47).</li>
</ul>
</li>
<li><dl class="first docutils">
<dt>On line 53 we add a new recorder (of our custom recorder class) to the</dt>
<dd><p class="first last">attribute <strong>temperature</strong> of all ThermalProcesses. That is all we have
actually to do to add a recorder, the simulation will call the recorder&#8217;s
<strong>on_simulation_step()</strong> and <strong>on_observed_value()</strong> method each time the
simulation did a step.</p>
</dd>
</dl>
</li>
<li><p class="first">On line 57 we actually start the simulation for 1 hour with a resolution
of 5 minutes.</p>
</li>
</ul>
<p><em>The output of the console logger should be something like this</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>RESET, observing: [&#39;hot_room&#39;, &#39;cold_room&#39;]
time = 0 second:
    hot_room.temperature = 333.15 kelvin
    cold_room.temperature = 293.15 kelvin
time = 300.0 second:
    hot_room.temperature = 325.189800995 kelvin
    cold_room.temperature = 301.110199005 kelvin
time = 600.0 second:
    hot_room.temperature = 320.3978404 kelvin
    cold_room.temperature = 305.9021596 kelvin
time = 900.0 second:
    hot_room.temperature = 317.513127803 kelvin
    cold_room.temperature = 308.786872197 kelvin
time = 1200.0 second:
    hot_room.temperature = 315.776559523 kelvin
    cold_room.temperature = 310.523440477 kelvin
time = 1500.0 second:
    hot_room.temperature = 314.731162698 kelvin
    cold_room.temperature = 311.568837302 kelvin
time = 1800.0 second:
    hot_room.temperature = 314.101844211 kelvin
    cold_room.temperature = 312.198155789 kelvin
time = 2100.0 second:
    hot_room.temperature = 313.723000744 kelvin
    cold_room.temperature = 312.576999256 kelvin
time = 2400.0 second:
    hot_room.temperature = 313.494940746 kelvin
    cold_room.temperature = 312.805059254 kelvin
time = 2700.0 second:
    hot_room.temperature = 313.357650897 kelvin
    cold_room.temperature = 312.942349103 kelvin
time = 3000.0 second:
    hot_room.temperature = 313.275003774 kelvin
    cold_room.temperature = 313.024996226 kelvin
time = 3300.0 second:
    hot_room.temperature = 313.225251028 kelvin
    cold_room.temperature = 313.074748972 kelvin
time = 3600.0 second:
    hot_room.temperature = 313.19530037 kelvin
    cold_room.temperature = 313.10469963 kelvin
</pre></div>
</div>
<dl class="class">
<dt id="gridsim.recorder.PlotRecorder">
<em class="property">class </em><tt class="descclassname">gridsim.recorder.</tt><tt class="descname">PlotRecorder</tt><big>(</big><em>self</em>, <em>attribute_name</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.simulation.Recorder</span></tt></a>, <a class="reference internal" href="io.html#gridsim.iodata.output.AttributesGetter" title="gridsim.iodata.output.AttributesGetter"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.iodata.output.AttributesGetter</span></tt></a></p>
<p>A <a class="reference internal" href="#gridsim.recorder.PlotRecorder" title="gridsim.recorder.PlotRecorder"><tt class="xref py py-class docutils literal"><span class="pre">PlotRecorder</span></tt></a> can be used to record one or multiple signals
and plot them at the end of the simulation either to a image file,
add them to a PDF or show them on a window.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attribute_name</strong> (<em>str</em>) &#8211; The attribute name to observe. Every
<a class="reference internal" href="core.html#gridsim.core.AbstractSimulationElement" title="gridsim.core.AbstractSimulationElement"><tt class="xref py py-class docutils literal"><span class="pre">AbstractSimulationElement</span></tt></a> with a param of this name can
be recorded</td>
</tr>
</tbody>
</table>
<p><em>Example:</em></p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">gridsim.unit</span> <span class="kn">import</span> <span class="n">units</span>
<span class="kn">from</span> <span class="nn">gridsim.simulation</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.core</span> <span class="kn">import</span> <span class="n">ThermalCoupling</span><span class="p">,</span> <span class="n">ThermalProcess</span>
<span class="kn">from</span> <span class="nn">gridsim.thermal.element</span> <span class="kn">import</span> <span class="n">ConstantTemperatureProcess</span>
<span class="kn">from</span> <span class="nn">gridsim.recorder</span> <span class="kn">import</span> <span class="n">PlotRecorder</span>
<span class="kn">from</span> <span class="nn">gridsim.iodata.output</span> <span class="kn">import</span> <span class="n">FigureSaver</span><span class="p">,</span> <span class="n">CSVSaver</span>

<span class="c"># Gridsim simulator.</span>
<span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="c"># Create a simple thermal process: Two rooms and the thermal coupling between</span>
<span class="c"># them and to the outside temperature.</span>
<span class="c">#             __________                        ___________</span>
<span class="c">#           |          |   ________________   |           |</span>
<span class="c">#           |   room1  |]-| room1 to room2 |-[| cold_room |</span>
<span class="c">#           |    18 C  |  |_____50_W/K_____|  |    25 C   |      outside 5 C</span>
<span class="c">#  10 W/K -[|          |                      |           |]- 10 W/K</span>
<span class="c">#           |__________|                      |___________|</span>
<span class="c">#</span>
<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">room1</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;room1&#39;</span><span class="p">,</span>
                                            <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                            <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                            <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>
<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">room2</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalProcess</span><span class="o">.</span><span class="n">room</span><span class="p">(</span><span class="s">&#39;room2&#39;</span><span class="p">,</span>
                                            <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">meter</span><span class="p">,</span>
                                            <span class="mf">2.5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">metre</span><span class="p">,</span>
                                            <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">celsius</span> <span class="o">=</span> <span class="n">units</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">)</span>
<span class="n">outside</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
    <span class="n">ConstantTemperatureProcess</span><span class="p">(</span><span class="s">&#39;outside&#39;</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">kelvin</span><span class="p">)))</span>

<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;room1 to outside&#39;</span><span class="p">,</span>
                                <span class="mi">10</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">room1</span><span class="p">,</span> <span class="n">outside</span><span class="p">))</span>
<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;room2 to outside&#39;</span><span class="p">,</span>
                                <span class="mi">10</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">room2</span><span class="p">,</span> <span class="n">outside</span><span class="p">))</span>
<span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ThermalCoupling</span><span class="p">(</span><span class="s">&#39;room1 to room2&#39;</span><span class="p">,</span>
                                <span class="mi">50</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">thermal_conductivity</span><span class="p">,</span>
                                <span class="n">room1</span><span class="p">,</span> <span class="n">room2</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the temperatures of all thermal processes.</span>
<span class="n">kelvin</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">kelvin</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">))</span>

<span class="c"># Create a plot recorder that records the temperatures of all thermal</span>
<span class="c"># processes in Kelvin.</span>
<span class="n">celsius</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">),</span>
           <span class="k">lambda</span> <span class="n">context</span><span class="p">:</span> <span class="n">units</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">units</span><span class="o">.</span><span class="n">degC</span><span class="p">))</span>

<span class="c"># Create a second plot recorder which records all energy flows</span>
<span class="c"># (thermal couplings) between the different processes.</span>

<span class="n">flow</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;power&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">element_class</span><span class="o">=</span><span class="n">ThermalCoupling</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Running simulation...&quot;</span><span class="p">)</span>

<span class="c"># Run the simulation for an hour with a resolution of 1 second.</span>
<span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="mi">1</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Saving data...&quot;</span><span class="p">)</span>

<span class="c"># Save the figures as images.</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">kelvin</span><span class="p">,</span> <span class="s">&quot;Temperature (K)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/fig1.png&#39;</span><span class="p">)</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">celsius</span><span class="p">,</span> <span class="s">&quot;Temperature (C)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/fig2.png&#39;</span><span class="p">)</span>
<span class="n">FigureSaver</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="s">&quot;Flow&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/fig3.png&#39;</span><span class="p">)</span>

<span class="n">CSVSaver</span><span class="p">(</span><span class="n">celsius</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;./output/fig2.csv&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<ul>
<li><p class="first">In this example, only new concept are detailed.</p>
</li>
<li><p class="first">On line 46, we create a <a class="reference internal" href="#gridsim.recorder.PlotRecorder" title="gridsim.recorder.PlotRecorder"><tt class="xref py py-class docutils literal"><span class="pre">PlotRecorder</span></tt></a> which recorder the
<tt class="docutils literal"><span class="pre">temperature</span></tt> attribute.</p>
</li>
<li><p class="first">On line 47, we use that recorder in order to record all elements in
the thermal module who have the attribute &#8216;temperature&#8217; by using the
powerful <a class="reference internal" href="#gridsim.simulation.Simulator.find" title="gridsim.simulation.Simulator.find"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Simulator.find()</span></tt></a> method by asking
to return a list of all elements that have the attribute &#8216;temperature&#8217;.</p>
</li>
<li><p class="first">On line 51, we create a very similar recorder as before,</p>
</li>
<li><p class="first">On line 52, this time we do not want to record the temperature in
kelvin, we want the temperature in degrees celsius. As the
simulator needs temperatures in kelvin (see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a> for
mor information), we have to add a conversion lambda function
which will convert the temperature in degrees celsius.
The lambda gets a named tuple as parameter which contains the
following keys:</p>
<ul class="simple">
<li>&#8220;value&#8221;: the value just read from the attribute,</li>
<li>&#8220;time&#8221;: the actual simulation time and</li>
<li>&#8220;delta_time&#8221;: the time interval for which the value has been
calculated.</li>
</ul>
<p>The <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a> module provides a simple way to convert
data, thus we use it.</p>
</li>
<li><p class="first">On line 69, we create a first <a class="reference internal" href="io.html#gridsim.iodata.output.FigureSaver" title="gridsim.iodata.output.FigureSaver"><tt class="xref py py-class docutils literal"><span class="pre">FigureSaver</span></tt></a> instance with the
title &#8216;Temperature (K)&#8217; which will use the data returned by the
<a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> to <tt class="xref py py-func docutils literal"><span class="pre">save()</span></tt> the data in a figure.</p>
</li>
<li><p class="first">On line 70, we also save the data of the other <a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a>.
The figures below show that the result is quite the same except that
the y-coordinates have the right unit.</p>
</li>
<li><p class="first">On line 73, we save the data using another saver: <a class="reference internal" href="io.html#gridsim.iodata.output.CSVSaver" title="gridsim.iodata.output.CSVSaver"><tt class="xref py py-class docutils literal"><span class="pre">CSVSaver</span></tt></a>.</p>
</li>
</ul>
<p>The resulting 3 images of this simulation are show here:</p>
<div class="figure align-center">
<img alt="_images/fig1.png" src="_images/fig1.png" />
</div>
<div class="figure align-center">
<img alt="_images/fig2.png" src="_images/fig2.png" />
</div>
<div class="figure align-center">
<img alt="_images/fig3.png" src="_images/fig3.png" />
</div>
<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.on_simulation_reset">
<tt class="descname">on_simulation_reset</tt><big>(</big><em>self</em>, <em>subjects</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.on_simulation_reset" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> implementation. Prepares the data structures.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#gridsim.simulation.Recorder.on_simulation_reset" title="gridsim.simulation.Recorder.on_simulation_reset"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_simulation_reset()</span></tt></a>
for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.on_simulation_step">
<tt class="descname">on_simulation_step</tt><big>(</big><em>self</em>, <em>time</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.on_simulation_step" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> implementation. Prepares the data structures.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#gridsim.simulation.Recorder.on_simulation_step" title="gridsim.simulation.Recorder.on_simulation_step"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_simulation_step()</span></tt></a>
for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.on_observed_value">
<tt class="descname">on_observed_value</tt><big>(</big><em>self</em>, <em>subject</em>, <em>time</em>, <em>value</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.on_observed_value" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">Recorder</span></tt></a> implementation. Saves the data in order to
plot them afterwards.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#gridsim.simulation.Recorder.on_observed_value" title="gridsim.simulation.Recorder.on_observed_value"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Recorder.on_observed_value()</span></tt></a>
for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.get_x_values">
<tt class="descname">get_x_values</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.get_x_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a list of time, on for each <a class="reference internal" href="#gridsim.recorder.PlotRecorder.on_observed_value" title="gridsim.recorder.PlotRecorder.on_observed_value"><tt class="xref py py-func docutils literal"><span class="pre">on_observed_value()</span></tt></a> and
ordered following the call of <a class="reference internal" href="#gridsim.simulation.Simulator.step" title="gridsim.simulation.Simulator.step"><tt class="xref py py-func docutils literal"><span class="pre">gridsim.simulation.Simulator.step()</span></tt></a>.</p>
<p><em>Example</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">()</span>

<span class="n">kelvin</span> <span class="o">=</span> <span class="n">PlotRecorder</span><span class="p">(</span><span class="s">&#39;temperature&#39;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">kelvin</span><span class="p">,</span> <span class="n">sim</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">has_attribute</span><span class="o">=</span><span class="s">&#39;temperature&#39;</span><span class="p">))</span>

<span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">17</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">42</span><span class="o">*</span><span class="n">units</span><span class="o">.</span><span class="n">second</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, this function should returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mi">17</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">42</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">time in second</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.get_x_unit">
<tt class="descname">get_x_unit</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.get_x_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the unit of the time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the time unit, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.get_y_values">
<tt class="descname">get_y_values</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.get_y_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves a map of the recorded data:</p>
<div class="highlight-python"><div class="highlight"><pre>{
    id1: [list of recorded values]
    id2: [list of recorded values]
}
</pre></div>
</div>
<p>with <tt class="docutils literal"><span class="pre">idX</span></tt> the <tt class="docutils literal"><span class="pre">subject</span></tt> given in parameter of <a class="reference internal" href="#gridsim.recorder.PlotRecorder.on_observed_value" title="gridsim.recorder.PlotRecorder.on_observed_value"><tt class="xref py py-func docutils literal"><span class="pre">on_observed_value()</span></tt></a>
and <a class="reference internal" href="#gridsim.recorder.PlotRecorder.on_simulation_reset" title="gridsim.recorder.PlotRecorder.on_simulation_reset"><tt class="xref py py-func docutils literal"><span class="pre">on_simulation_reset()</span></tt></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a map associating id to recorded data</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.PlotRecorder.get_y_unit">
<tt class="descname">get_y_unit</tt><big>(</big><em>self</em><big>)</big><a class="headerlink" href="#gridsim.recorder.PlotRecorder.get_y_unit" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the unit od the recorded data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the unit, see <a class="reference internal" href="unit.html#module-gridsim.unit" title="gridsim.unit"><tt class="xref py py-mod docutils literal"><span class="pre">gridsim.unit</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gridsim.recorder.HistogramRecorder">
<em class="property">class </em><tt class="descclassname">gridsim.recorder.</tt><tt class="descname">HistogramRecorder</tt><big>(</big><em>*args</em>, <em>**keywords</em><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gridsim.simulation.Recorder" title="gridsim.simulation.Recorder"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.simulation.Recorder</span></tt></a>, <a class="reference internal" href="io.html#gridsim.iodata.output.AttributesGetter" title="gridsim.iodata.output.AttributesGetter"><tt class="xref py py-class docutils literal"><span class="pre">gridsim.iodata.output.AttributesGetter</span></tt></a></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This class is currently not tested...</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>attribute_name</strong> &#8211; </li>
<li><strong>x_min</strong> &#8211; </li>
<li><strong>x_max</strong> &#8211; </li>
<li><strong>nb_bins</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.on_simulation_reset">
<tt class="descname">on_simulation_reset</tt><big>(</big><em>subjects</em><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.on_simulation_reset" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">RecorderInterface</span></tt> implementation. Writes the header to the file
defined by the _header_format attribute each time the simulation does a
reset.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">RecorderInterface.on_simulation_reset()</span></tt>
for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.on_simulation_step">
<tt class="descname">on_simulation_step</tt><big>(</big><em>time</em><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.on_simulation_step" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">RecorderInterface</span></tt> implementation. Called for each simulation
step once per recorder.
Writes the step separation to the file.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">RecorderInterface.on_simulation_step()</span></tt> for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.on_observed_value">
<tt class="descname">on_observed_value</tt><big>(</big><em>subject</em>, <em>time</em>, <em>value</em><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.on_observed_value" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref py py-class docutils literal"><span class="pre">RecorderInterface</span></tt> implementation. Writes a (formatted) string
into the file.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">RecorderInterface.on_observed_value()</span></tt> for details.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.get_x_values">
<tt class="descname">get_x_values</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.get_x_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.get_x_unit">
<tt class="descname">get_x_unit</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.get_x_unit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.get_y_values">
<tt class="descname">get_y_values</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.get_y_values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gridsim.recorder.HistogramRecorder.get_y_unit">
<tt class="descname">get_y_unit</tt><big>(</big><big>)</big><a class="headerlink" href="#gridsim.recorder.HistogramRecorder.get_y_unit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="core.html" class="btn btn-neutral float-right" title="3. The Simulation Core"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="1. Overview"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="copyright.html">Copyright</a> 2013-2014, The Gridsim Team.
      Last updated on Jan 12, 2015.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.1-rc1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>